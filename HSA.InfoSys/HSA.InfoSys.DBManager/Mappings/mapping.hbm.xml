<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                    assembly="HSA.InfoSys.DBManager"
                    namespace="HSA.InfoSys.DBManager.Data">

  <class name= "Issue" table ="Issue">
    <id name ="IssueGUID" type ="guid">
      <generator class="guid.comb"/>
    </id>
    <!--><property name="issueId" type ="int" column="issueId" length ="11" not-null="true" unique="true" />-->
    <property name="Text" type="string">
      <column name="text" sql-type="mediumtext" length="16777215" not-null="false"/>
    </property>
    <property name="Title" type="string" column="title" length ="40" not-null="true"/>
    <property name="ThreatLevel" type="int" column="threatlevel" length ="11" not-null="true"/>
    <property name="Date" type="date" column="date" not-null="true"/>
    <many-to-one name="Component" class="Component" column="componentGUID"></many-to-one>
    <many-to-one name="Source" class="Source" column="sourceGUID"></many-to-one>
  </class>

  <class name= "Component" table ="Component">
    <id name ="ComponentGUID" type ="guid">
      <generator class="guid.comb"/>
    </id>
    <!--><property name="componentId" type ="int" column="componentId" length ="11" not-null="true" unique="true" />-->
    <property name="Name" type="string" column="name" length ="100" not-null="true" />
    <one-to-one name="Result" class="Result" />
  </class>

  <class name= "Source" table ="Source">
    <id name ="SourceGUID" type ="guid">
      <generator class="guid.comb"/>
    </id>
    <!--><property name="sourceId" type ="int" column="sourceId" length ="11" not-null="true" unique="true" />-->
    <property name="URL" type="string" >
      <column name="URL" length ="2043" not-null="true" />
    </property>
  </class>


  <!-- 
        Hallo Sanim die Tabellen unten haben wir schon einmal soweit wir bescheid wussten reingeschrieben.
        Musst jetzt nochmal anhand von Raffis Email kontrollieren und ausbessern, weil wir uns ja nicht mit nhibernate
        auskennen. Danke!!
  -->
  
  <class name="System" table="System">
    <id name="SystemGUID" type="guid">
      <generator class="guid.comb"/>
    </id>
    <property name="SystemName" type="string" column="systemname" length="100" not-null="true"/>
    <property name="UserID" type="int" column="userid" length="10" not-null="true"/>
    <many-to-one name="Compononent" class="Component" column="componentGUID" ></many-to-one>
    <many-to-one name="SystemConfig" class="SystemConfig" column="systemconfigGUID"></many-to-one>
  </class>

  <class name="SystemConfig" table="SystemConfig">
    <id name="SystemConfigGUID" type="guid">
      <generator class="guid.comb"/>
    </id>
    <property name="TimeStamp" type="timestamp" column="timestamp" not-null="true"/>
    <property name="E-Mail" type="string" column="email" not-null="false"/>
    <property name="SearchLinks" type="string" column="searchlinks" not-null="true"/>
    <property name="EmailNotification" type="bool" column="emailnotification" not-null="true"/>
  </class>

  <class name="Result" table="Result">
    <id name ="ResultGUID" type ="guid">
      <generator class="guid.comb"/>
    </id>
    <property name="Data" type="object" column="data" not-null="true"/>
    <property name="TimeStamp" type="timestamp" column="timestamp" not-null="true"/>
  </class>

  <class name="Scheduler" table="Scheduler">
    <id name ="ResultGUID" type ="guid">
      <generator class="guid.comb"/>
    </id>
    <property name="days" type="int" column="days" not-null="true"/>
    <property name="hour" type="int" column="hour" not-null="true"/>
    <property name="TimeStamp" type="timestamp" column="timestamp" not-null="true"/>
  </class>

</hibernate-mapping>
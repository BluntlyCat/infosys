<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>HSA.InfoSys: C:/Users/michael/Development/HSA.InfoSys/3rdparty/nhibernate-core/src/NHibernate/Impl/SessionImpl.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="hsasec.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">HSA.InfoSys
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Crawls webpages for security issues, collect this information and views the results for specified components.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_session_impl_8cs_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SessionImpl.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> System.Collections;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> System.Data;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> System.Linq.Expressions;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> System.Runtime.Serialization;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> System.Security;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> System.Security.Permissions;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> NHibernate.AdoNet;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> NHibernate.Collection;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> NHibernate.Criterion;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using</span> NHibernate.Engine;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using</span> NHibernate.Engine.Query;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">using</span> NHibernate.Engine.Query.Sql;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">using</span> NHibernate.Event;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">using</span> NHibernate.Hql;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">using</span> NHibernate.Intercept;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> NHibernate.Loader.Criteria;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> NHibernate.Loader.Custom;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> NHibernate.Loader.Custom.Sql;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> NHibernate.Persister.Collection;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using</span> NHibernate.Persister.Entity;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> NHibernate.Proxy;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using</span> NHibernate.Stat;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using</span> NHibernate.Type;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using</span> NHibernate.Util;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">namespace </span>NHibernate.Impl</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    [Serializable]</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html">   40</a></span>&#160;    <span class="keyword">public</span> sealed <span class="keyword">class </span><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a> : <a class="code" href="class_n_hibernate_1_1_impl_1_1_abstract_session_impl.html" title="Functionality common to stateless and stateful sessions ">AbstractSessionImpl</a>, <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_event_source.html">IEventSource</a>, ISerializable, IDeserializationCallback</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly <a class="code" href="interface_n_hibernate_1_1_i_internal_logger.html">IInternalLogger</a> log = <a class="code" href="class_n_hibernate_1_1_logger_provider.html">LoggerProvider</a>.LoggerFor(typeof(<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a>));</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">long</span> timestamp;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keyword">private</span> <a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5" title="Controls how the session interacts with the second-level cache and query cache. ">CacheMode</a> cacheMode = <a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5" title="Controls how the session interacts with the second-level cache and query cache. ">CacheMode</a>.Normal;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">private</span> <a class="code" href="namespace_n_hibernate.html#a32964983bec6b37f749177ca8882a191" title="Represents a flushing strategy. ">FlushMode</a> flushMode = <a class="code" href="namespace_n_hibernate.html#a32964983bec6b37f749177ca8882a191" title="Represents a flushing strategy. ">FlushMode</a>.Auto;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="interface_n_hibernate_1_1_i_interceptor.html" title="Allows user code to inspect and/or change property values before they are written and after they are ...">IInterceptor</a> interceptor;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a> entityMode = <a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a>.Poco;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_criteria_batch.html">FutureCriteriaBatch</a> futureCriteriaBatch;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_query_batch.html">FutureQueryBatch</a> futureQueryBatch;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="class_n_hibernate_1_1_event_1_1_event_listeners.html" title="A convience holder for all defined session event listeners. ">EventListeners</a> listeners;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a> actionQueue;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="class_n_hibernate_1_1_ado_net_1_1_connection_manager.html" title="Manages the database connection and transaction for an ISession. ">ConnectionManager</a> connectionManager;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> dontFlushFromFind;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keyword">private</span> readonly IDictionary&lt;string, IFilter&gt; enabledFilters = <span class="keyword">new</span> Dictionary&lt;string, IFilter&gt;();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keyword">private</span> readonly List&lt;string&gt; enabledFilterNames = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="class_n_hibernate_1_1_engine_1_1_stateful_persistence_context.html" title="A IPersistenceContext represents the state of persistent &quot;stuff&quot; which NHibernate is tracking...">StatefulPersistenceContext</a> persistenceContext;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="interface_n_hibernate_1_1_i_session.html" title="The main runtime interface between a .NET application and NHibernate. This is the central API class a...">ISession</a> rootSession;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keyword">private</span> IDictionary&lt;EntityMode, ISession&gt; childSessionsByEntityMode;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">bool</span> flushBeforeCompletionEnabled;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">bool</span> autoCloseSessionEnabled;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        [NonSerialized]</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keyword">private</span> readonly ConnectionReleaseMode connectionReleaseMode;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">        #region System.Runtime.Serialization.ISerializable Members</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a>(SerializationInfo info, StreamingContext context)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            timestamp = info.GetInt64(<span class="stringliteral">&quot;timestamp&quot;</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_factory_impl.html" title="Concrete implementation of a SessionFactory. ">SessionFactoryImpl</a> fact = (<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_factory_impl.html" title="Concrete implementation of a SessionFactory. ">SessionFactoryImpl</a>)info.GetValue(<span class="stringliteral">&quot;factory&quot;</span>, typeof(<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_factory_impl.html" title="Concrete implementation of a SessionFactory. ">SessionFactoryImpl</a>));</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            Factory = fact;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            listeners = fact.EventListeners;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            persistenceContext = (<a class="code" href="class_n_hibernate_1_1_engine_1_1_stateful_persistence_context.html" title="A IPersistenceContext represents the state of persistent &quot;stuff&quot; which NHibernate is tracking...">StatefulPersistenceContext</a>)info.GetValue(<span class="stringliteral">&quot;persistenceContext&quot;</span>, typeof(<a class="code" href="class_n_hibernate_1_1_engine_1_1_stateful_persistence_context.html" title="A IPersistenceContext represents the state of persistent &quot;stuff&quot; which NHibernate is tracking...">StatefulPersistenceContext</a>));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            actionQueue = (<a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a>)info.GetValue(<span class="stringliteral">&quot;actionQueue&quot;</span>, typeof(<a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a>));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            flushMode = (<a class="code" href="namespace_n_hibernate.html#a32964983bec6b37f749177ca8882a191" title="Represents a flushing strategy. ">FlushMode</a>)info.GetValue(<span class="stringliteral">&quot;flushMode&quot;</span>, typeof(<a class="code" href="namespace_n_hibernate.html#a32964983bec6b37f749177ca8882a191" title="Represents a flushing strategy. ">FlushMode</a>));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            cacheMode = (<a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5" title="Controls how the session interacts with the second-level cache and query cache. ">CacheMode</a>)info.GetValue(<span class="stringliteral">&quot;cacheMode&quot;</span>, typeof(<a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5" title="Controls how the session interacts with the second-level cache and query cache. ">CacheMode</a>));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            interceptor = (<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html" title="Allows user code to inspect and/or change property values before they are written and after they are ...">IInterceptor</a>)info.GetValue(<span class="stringliteral">&quot;interceptor&quot;</span>, typeof(<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html" title="Allows user code to inspect and/or change property values before they are written and after they are ...">IInterceptor</a>));</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            enabledFilters = (IDictionary&lt;string, IFilter&gt;)info.GetValue(<span class="stringliteral">&quot;enabledFilters&quot;</span>, typeof(Dictionary&lt;string, IFilter&gt;));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            enabledFilterNames = (List&lt;string&gt;)info.GetValue(<span class="stringliteral">&quot;enabledFilterNames&quot;</span>, typeof(List&lt;string&gt;));</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            connectionManager = (<a class="code" href="class_n_hibernate_1_1_ado_net_1_1_connection_manager.html" title="Manages the database connection and transaction for an ISession. ">ConnectionManager</a>)info.GetValue(<span class="stringliteral">&quot;connectionManager&quot;</span>, typeof(<a class="code" href="class_n_hibernate_1_1_ado_net_1_1_connection_manager.html" title="Manages the database connection and transaction for an ISession. ">ConnectionManager</a>));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#if NET_4_0</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor"></span>        [SecurityCritical]</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor"></span>        [SecurityPermission(SecurityAction.LinkDemand, Flags = SecurityPermissionFlag.SerializationFormatter)]</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor"></span>        <span class="keywordtype">void</span> ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            log.Debug(<span class="stringliteral">&quot;writting session to serializer&quot;</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordflow">if</span> (!connectionManager.IsReadyForSerialization)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot serialize a Session while connected&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            info.AddValue(<span class="stringliteral">&quot;factory&quot;</span>, Factory, typeof(<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_factory_impl.html" title="Concrete implementation of a SessionFactory. ">SessionFactoryImpl</a>));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            info.AddValue(<span class="stringliteral">&quot;persistenceContext&quot;</span>, persistenceContext, typeof(<a class="code" href="class_n_hibernate_1_1_engine_1_1_stateful_persistence_context.html" title="A IPersistenceContext represents the state of persistent &quot;stuff&quot; which NHibernate is tracking...">StatefulPersistenceContext</a>));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            info.AddValue(<span class="stringliteral">&quot;actionQueue&quot;</span>, actionQueue, typeof(<a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a>));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            info.AddValue(<span class="stringliteral">&quot;timestamp&quot;</span>, timestamp);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            info.AddValue(<span class="stringliteral">&quot;flushMode&quot;</span>, flushMode);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            info.AddValue(<span class="stringliteral">&quot;cacheMode&quot;</span>, cacheMode);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            info.AddValue(<span class="stringliteral">&quot;interceptor&quot;</span>, interceptor, typeof(<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html" title="Allows user code to inspect and/or change property values before they are written and after they are ...">IInterceptor</a>));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            info.AddValue(<span class="stringliteral">&quot;enabledFilters&quot;</span>, enabledFilters, typeof(IDictionary&lt;string, IFilter&gt;));</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            info.AddValue(<span class="stringliteral">&quot;enabledFilterNames&quot;</span>, enabledFilterNames, typeof(List&lt;string&gt;));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            info.AddValue(<span class="stringliteral">&quot;connectionManager&quot;</span>, connectionManager, typeof(<a class="code" href="class_n_hibernate_1_1_ado_net_1_1_connection_manager.html" title="Manages the database connection and transaction for an ISession. ">ConnectionManager</a>));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">        #region System.Runtime.Serialization.IDeserializationCallback Members</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordtype">void</span> IDeserializationCallback.OnDeserialization(<span class="keywordtype">object</span> sender)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            log.Debug(<span class="stringliteral">&quot;OnDeserialization of the session.&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            persistenceContext.SetSession(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="comment">// OnDeserialization() must be called manually on all Dictionaries and Hashtables,</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="comment">// otherwise they are still empty at this point (the .NET deserialization code calls</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="comment">// OnDeserialization() on them AFTER it calls the current method).</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            ((IDeserializationCallback)enabledFilters).OnDeserialization(sender);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> filterName <span class="keywordflow">in</span> enabledFilterNames)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <a class="code" href="class_n_hibernate_1_1_impl_1_1_filter_impl.html">FilterImpl</a> filter = (<a class="code" href="class_n_hibernate_1_1_impl_1_1_filter_impl.html">FilterImpl</a>)enabledFilters[filterName];</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                filter.AfterDeserialize(Factory.GetFilterDefinition(filterName));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keyword">internal</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a>(</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            IDbConnection connection,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_factory_impl.html" title="Concrete implementation of a SessionFactory. ">SessionFactoryImpl</a> factory,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordtype">bool</span> autoclose,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordtype">long</span> timestamp,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="interface_n_hibernate_1_1_i_interceptor.html" title="Allows user code to inspect and/or change property values before they are written and after they are ...">IInterceptor</a> interceptor,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a> entityMode,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordtype">bool</span> flushBeforeCompletionEnabled,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordtype">bool</span> autoCloseSessionEnabled,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            ConnectionReleaseMode connectionReleaseMode)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            : base(factory)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">if</span> (interceptor == null)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_assertion_failure.html" title="Indicates failure of an assertion: a possible bug in NHibernate ">AssertionFailure</a>(<span class="stringliteral">&quot;The interceptor can not be null.&quot;</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                rootSession = null;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                this.timestamp = timestamp;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                this.entityMode = entityMode;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                this.interceptor = interceptor;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                listeners = factory.EventListeners;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                actionQueue = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                persistenceContext = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_engine_1_1_stateful_persistence_context.html" title="A IPersistenceContext represents the state of persistent &quot;stuff&quot; which NHibernate is tracking...">StatefulPersistenceContext</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                this.flushBeforeCompletionEnabled = flushBeforeCompletionEnabled;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                this.autoCloseSessionEnabled = autoCloseSessionEnabled;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                this.connectionReleaseMode = connectionReleaseMode;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                connectionManager = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_ado_net_1_1_connection_manager.html" title="Manages the database connection and transaction for an ISession. ">ConnectionManager</a>(<span class="keyword">this</span>, connection, connectionReleaseMode, interceptor);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keywordflow">if</span> (factory.<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_factory_impl.html#a10125e1f663aa6be6ace527c89ebc28b" title="Get the statistics for this session factory">Statistics</a>.<a class="code" href="interface_n_hibernate_1_1_stat_1_1_i_statistics.html#ae553d5957fe60f60fdb899225c059153" title="Enable/Disable statistics logs (this is a dynamic parameter)">IsStatisticsEnabled</a>)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    factory.<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_factory_impl.html#a21343f0dee41e565c63b01e7fd4595ae" title="Statistics SPI">StatisticsImplementor</a>.OpenSession();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordflow">if</span> (log.IsDebugEnabled)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    log.DebugFormat(<span class="stringliteral">&quot;[session-id={0}] opened session at timestamp: {1}, for session factory: [{2}/{3}]&quot;</span>,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                        SessionId, timestamp, factory.Name, factory.Uuid);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a>(<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a> parent, <a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a> entityMode)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            : base(parent.Factory, parent.SessionId)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                rootSession = parent;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                timestamp = parent.timestamp;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                connectionManager = parent.connectionManager;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                interceptor = parent.interceptor;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                listeners = parent.listeners;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                actionQueue = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                this.entityMode = entityMode;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                persistenceContext = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_engine_1_1_stateful_persistence_context.html" title="A IPersistenceContext represents the state of persistent &quot;stuff&quot; which NHibernate is tracking...">StatefulPersistenceContext</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                flushBeforeCompletionEnabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                autoCloseSessionEnabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                connectionReleaseMode = parent.ConnectionReleaseMode; <span class="comment">// NH different</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordflow">if</span> (Factory.Statistics.IsStatisticsEnabled)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    Factory.StatisticsImplementor.OpenSession();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                log.Debug(<span class="stringliteral">&quot;opened session [&quot;</span> + entityMode + <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_criteria_batch.html">FutureCriteriaBatch</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_criteria_batch.html">FutureCriteriaBatch</a></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordflow">if</span> (futureCriteriaBatch == null)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    futureCriteriaBatch = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_criteria_batch.html">FutureCriteriaBatch</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="keywordflow">return</span> futureCriteriaBatch;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="keyword">internal</span> set</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                futureCriteriaBatch = value;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_query_batch.html">FutureQueryBatch</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_query_batch.html">FutureQueryBatch</a></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">if</span> (futureQueryBatch == null)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    futureQueryBatch = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_future_query_batch.html">FutureQueryBatch</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">return</span> futureQueryBatch;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keyword">internal</span> set</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                futureQueryBatch = value;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="interface_n_hibernate_1_1_engine_1_1_i_batcher.html" title="Manages IDbCommands and IDataReaders for an ISession. ">IBatcher</a> Batcher</div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae4ecb7c8d7f33f1ad1e7a5856393b9a6">  312</a></span>&#160;        {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">return</span> connectionManager.Batcher;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">long</span> Timestamp</div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a31c2d6ce20cf577dd9d22edf6eddf91e">  322</a></span>&#160;        {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> timestamp; }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keyword">public</span> ConnectionReleaseMode ConnectionReleaseMode</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> connectionReleaseMode; }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> IsAutoCloseSessionEnabled</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> autoCloseSessionEnabled; }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> ShouldAutoClose</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> IsAutoCloseSessionEnabled &amp;&amp; !IsClosed; }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab0b217439496c467882509137ff6cc39">  348</a></span>&#160;        <span class="keyword">public</span> IDbConnection <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab0b217439496c467882509137ff6cc39" title="Close the session and release all resources ">Close</a>()</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                log.Debug(<span class="stringliteral">&quot;closing session&quot;</span>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="keywordflow">if</span> (IsClosed)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_session_exception.html">SessionException</a>(<span class="stringliteral">&quot;Session was already closed&quot;</span>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordflow">if</span> (Factory.Statistics.IsStatisticsEnabled)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    Factory.StatisticsImplementor.CloseSession();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                        <span class="keywordflow">if</span> (childSessionsByEntityMode != null)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                            <span class="keywordflow">foreach</span> (KeyValuePair&lt;EntityMode, ISession&gt; pair <span class="keywordflow">in</span> childSessionsByEntityMode)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                            {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                pair.Value.Close();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                            }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    <span class="keywordflow">catch</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                        <span class="comment">// just ignore</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    <span class="keywordflow">if</span> (rootSession == null)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        <span class="keywordflow">return</span> connectionManager.Close();</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                    SetClosed();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    Cleanup();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a28bd0305351ef5425d0a9a5d59006c9f">  398</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a28bd0305351ef5425d0a9a5d59006c9f" title="Ensure that the locks are downgraded to LockMode.None and that all of the softlocks in the Cache have...">AfterTransactionCompletion</a>(<span class="keywordtype">bool</span> success, <a class="code" href="interface_n_hibernate_1_1_i_transaction.html" title="Allows the application to define units of work, while maintaining abstraction from the underlying tra...">ITransaction</a> tx)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                log.Debug(<span class="stringliteral">&quot;transaction completion&quot;</span>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">if</span> (Factory.Statistics.IsStatisticsEnabled)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    Factory.StatisticsImplementor.EndTransaction(success);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                connectionManager.AfterTransaction();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                persistenceContext.AfterTransactionCompletion();</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                actionQueue.AfterTransactionCompletion(success);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">if</span> (rootSession == null)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                        interceptor.<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html#a8f989dfe234b0afe91cdfb39b2e949bf" title="Called after a transaction is committed or rolled back. ">AfterTransactionCompletion</a>(tx);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    <span class="keywordflow">catch</span> (Exception t)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        log.Error(<span class="stringliteral">&quot;exception in interceptor afterTransactionCompletion()&quot;</span>, t);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <span class="comment">//if (autoClear)</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="comment">//  Clear();</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> Cleanup()</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                persistenceContext.Clear();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a90b65b10568d42966b8070b0bf0812b7">  437</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a90b65b10568d42966b8070b0bf0812b7" title="Determine the current lock mode of the given object ">GetCurrentLockMode</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <span class="keywordflow">if</span> (obj == null)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;obj&quot;</span>, <span class="stringliteral">&quot;null object passed to GetCurrentLockMode&quot;</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="keywordflow">if</span> (obj.IsProxy())</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    var proxy = obj as <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    obj = proxy.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html#a1f918fc4c018602cc97d96eb33920327" title="Get the underlying lazy initialization handler. ">HibernateLazyInitializer</a>.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a3ba5cfd1da095db7c159f9fe80f2dd3c" title="Return the underlying persistent object, initializing if necessary. ">GetImplementation</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    <span class="keywordflow">if</span> (obj == null)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a>.<a class="code" href="class_n_hibernate_1_1_lock_mode.html#a5a88ad4e385f739dbd6657e55bebdf9a" title="No lock required. ">None</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html" title="We need an entry to tell us all about the current state of an object with respect to its persistent s...">EntityEntry</a> e = persistenceContext.GetEntry(obj);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                <span class="keywordflow">if</span> (e == null)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_transient_object_exception.html" title="Throw when the user passes a transient instance to a ISession method that expects a persistent instan...">TransientObjectException</a>(<span class="stringliteral">&quot;Given object not associated with the session&quot;</span>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                <span class="keywordflow">if</span> (e.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#aa43891bc569e56ba38bc0ef880730b14" title="Gets or sets the Status of this Entity with respect to its persistence in the database. ">Status</a> != <a class="code" href="namespace_n_hibernate_1_1_engine.html#a1b396442b5d8f46009b2f81037f778c1" title="Represents the status of an entity with respect to this session. These statuses are for internal book...">Status</a>.Loaded)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_object_deleted_exception.html" title="Thrown when the user tries to pass a deleted object to the ISession. ">ObjectDeletedException</a>(<span class="stringliteral">&quot;The given object was deleted&quot;</span>, e.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#ad238df458a7b764df16e44e24d8834a7" title="Gets or sets the identifier of the Entity in the database. ">Id</a>, e.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#ab0395015de26aa20f11bf547dc5974f9" title="Gets the Fully Qualified Name of the class this Entity is an instance of. ">EntityName</a>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <span class="keywordflow">return</span> e.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#aff6abdf3e5fa366afe92c8c8bfc8456b" title="Gets or sets the current LockMode of the Entity. ">LockMode</a>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> IsOpen</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> !IsClosed; }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a93536369ecfc55f8f5c04b73e7e9ce02">  482</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a93536369ecfc55f8f5c04b73e7e9ce02" title="Save a transient object. An id is generated, assigned to the object and returned ">Save</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                <span class="keywordflow">return</span> FireSave(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(null, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a82c3509f21e0cdf5075ef223f6a57d79">  490</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a82c3509f21e0cdf5075ef223f6a57d79" title="Persist the given transient instance, first assigning a generated identifier. (Or using the current v...">Save</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="keywordflow">return</span> FireSave(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7863c59d058e58f5143431cd3a860e61">  498</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7863c59d058e58f5143431cd3a860e61" title="Persist the given transient instance, using the given identifier. ">Save</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                FireSave(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(entityName, obj, <span class="keywordtype">id</span>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#acaa6fecc31ec95e3fd0f1c679a3a61e7">  511</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#acaa6fecc31ec95e3fd0f1c679a3a61e7" title="Save a transient object with a manually assigned ID ">Save</a>(<span class="keywordtype">object</span> obj, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                FireSave(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(null, obj, <span class="keywordtype">id</span>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a4936ccfbd6e0d6c2e65e9d3c86758650">  523</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a4936ccfbd6e0d6c2e65e9d3c86758650" title="Delete a persistent object ">Delete</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                FireDelete(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_delete_event.html" title="Defines an event class for the deletion of an entity. ">DeleteEvent</a>(obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae874e92b29939ec4829a2e59e72ab99d">  532</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae874e92b29939ec4829a2e59e72ab99d" title="Delete a persistent object (by explicit entity name)">Delete</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                FireDelete(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_delete_event.html" title="Defines an event class for the deletion of an entity. ">DeleteEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5cd8204babf818fc789a810837527170">  540</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5cd8204babf818fc789a810837527170" title="Update the persistent instance with the identifier of the given transient instance. ">Update</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                FireUpdate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(null, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a91a69ebb73d2ec749b0595e8f12ec42d">  548</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a91a69ebb73d2ec749b0595e8f12ec42d" title="Update the persistent instance with the identifier of the given detached instance. ">Update</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                FireUpdate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae334a7592a630bd4a8526ae203f31e4c">  556</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae334a7592a630bd4a8526ae203f31e4c" title="Update the persistent instance associated with the given identifier. ">Update</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                FireUpdate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(entityName, obj, <span class="keywordtype">id</span>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab196a197a63b6ac660daf5dddf3a967b">  564</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab196a197a63b6ac660daf5dddf3a967b" title="Either Save() or Update() the given instance, depending upon the value of its identifier property...">SaveOrUpdate</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                FireSaveOrUpdate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(null, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a2d4a1196426fbf6c1762216a1b1ea3cb">  572</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a2d4a1196426fbf6c1762216a1b1ea3cb" title="Either Save(String,Object) or Update(String,Object) the given instance, depending upon resolution of ...">SaveOrUpdate</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                FireSaveOrUpdate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9b43ae29caf8a194b0177d774a78af18">  580</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9b43ae29caf8a194b0177d774a78af18" title="Either Save() or Update() the given instance, depending upon the value of its identifier property...">SaveOrUpdate</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                FireSaveOrUpdate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(entityName, obj, <span class="keywordtype">id</span>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#afb844a34c540d89becfd42bd87b4085c">  588</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#afb844a34c540d89becfd42bd87b4085c" title="Update the persistent state associated with the given identifier. ">Update</a>(<span class="keywordtype">object</span> obj, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                FireUpdate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a>(null, obj, <span class="keywordtype">id</span>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly <span class="keywordtype">object</span>[] NoArgs = <span class="keyword">new</span> <span class="keywordtype">object</span>[0];</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly <a class="code" href="interface_n_hibernate_1_1_type_1_1_i_type.html">IType</a>[] NoTypes = <span class="keyword">new</span> <a class="code" href="interface_n_hibernate_1_1_type_1_1_i_type.html">IType</a>[0];</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        IList Find(<span class="keywordtype">string</span> query, <span class="keywordtype">object</span>[] values, <a class="code" href="interface_n_hibernate_1_1_type_1_1_i_type.html">IType</a>[] types)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="keywordflow">return</span> List(query.ToQueryExpression(), <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a>(types, values));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> CloseSessionFromDistributedTransaction()</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            Dispose(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> List(IQueryExpression queryExpression, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters, IList results)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                queryParameters.<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html#a8624bfb9a9c27b73dc843e80d5999da2" title="Ensure the Types and Values are the same length. ">ValidateParameters</a>();</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                var plan = GetHQLQueryPlan(queryExpression, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                AutoFlushIfRequired(plan.QuerySpaces);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                dontFlushFromFind++; <span class="comment">//stops flush being called multiple times if this method is recursively called</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    plan.PerformList(queryParameters, <span class="keyword">this</span>, results);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">catch</span> (HibernateException)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    <span class="comment">// Do not call Convert on HibernateExceptions</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    <span class="keywordflow">throw</span> Convert(e, <span class="stringliteral">&quot;Could not execute query&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                    dontFlushFromFind--;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="interface_n_hibernate_1_1_hql_1_1_i_query_translator.html" title="Defines the constract of an HQL-&gt;SQL translator. ">IQueryTranslator</a>[] GetQueries(IQueryExpression query, <span class="keywordtype">bool</span> scalar)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                var plan = Factory.QueryPlanCache.GetHQLQueryPlan(query, scalar, enabledFilters);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                AutoFlushIfRequired(plan.QuerySpaces);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <span class="keywordflow">return</span> plan.Translators;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a33812536cbe85c2dfa039c71da454076">  655</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IEnumerable&lt;T&gt; Enumerable&lt;T&gt;(<a class="code" href="interface_n_hibernate_1_1_i_query_expression.html">IQueryExpression</a> queryExpression, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                queryParameters.<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html#a8624bfb9a9c27b73dc843e80d5999da2" title="Ensure the Types and Values are the same length. ">ValidateParameters</a>();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                var plan = GetHQLQueryPlan(queryExpression, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                AutoFlushIfRequired(plan.QuerySpaces);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                dontFlushFromFind++; <span class="comment">//stops flush being called multiple times if this method is recursively called</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    <span class="keywordflow">return</span> plan.PerformIterate&lt;T&gt;(queryParameters, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    dontFlushFromFind--;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aac37f9084fb7fc3abdfadc25ad882423">  676</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IEnumerable <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aac37f9084fb7fc3abdfadc25ad882423" title="Execute an Iterate() query ">Enumerable</a>(<a class="code" href="interface_n_hibernate_1_1_i_query_expression.html">IQueryExpression</a> queryExpression, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                queryParameters.<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html#a8624bfb9a9c27b73dc843e80d5999da2" title="Ensure the Types and Values are the same length. ">ValidateParameters</a>();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                var plan = GetHQLQueryPlan(queryExpression, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                AutoFlushIfRequired(plan.QuerySpaces);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                dontFlushFromFind++; <span class="comment">//stops flush being called multiple times if this method is recursively called</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    <span class="keywordflow">return</span> plan.PerformIterate(queryParameters, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    dontFlushFromFind--;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="comment">// TODO: Scroll(string query, QueryParameters queryParameters)</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af5c99582ca088cab7b4b4ac3f5b491e5">  699</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af5c99582ca088cab7b4b4ac3f5b491e5" title="Delete all objects returned by the query. ">Delete</a>(<span class="keywordtype">string</span> query)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5af2a6c498fb90ee345d997f888fce3b18" title="Xml value: delete">Delete</a>(query, NoArgs, NoTypes);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div>
<div class="line"><a name="l00707"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aaf4792d5e330210ee512873981cccacb">  707</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aaf4792d5e330210ee512873981cccacb" title="Delete all objects returned by the query. ">Delete</a>(<span class="keywordtype">string</span> query, <span class="keywordtype">object</span> value, <a class="code" href="interface_n_hibernate_1_1_type_1_1_i_type.html">IType</a> type)</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5af2a6c498fb90ee345d997f888fce3b18" title="Xml value: delete">Delete</a>(query, <span class="keyword">new</span>[] { value }, <span class="keyword">new</span>[] { type });</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab070015dcbf639dee15eaeb72796e6fd">  715</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab070015dcbf639dee15eaeb72796e6fd" title="Delete all objects returned by the query. ">Delete</a>(<span class="keywordtype">string</span> query, <span class="keywordtype">object</span>[] values, <a class="code" href="interface_n_hibernate_1_1_type_1_1_i_type.html">IType</a>[] types)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(query))</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;query&quot;</span>, <span class="stringliteral">&quot;attempt to perform delete-by-query with null query&quot;</span>);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <span class="keywordflow">if</span> (log.IsDebugEnabled)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                    log.Debug(<span class="stringliteral">&quot;delete: &quot;</span> + query);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                    <span class="keywordflow">if</span> (values.Length != 0)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                    {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                        log.Debug(<span class="stringliteral">&quot;parameters: &quot;</span> + StringHelper.ToString(values));</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                    }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                IList list = Find(query, values, types);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <span class="keywordtype">int</span> count = list.Count;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                    <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5af2a6c498fb90ee345d997f888fce3b18" title="Xml value: delete">Delete</a>(list[i]);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aef26eee31ed75a757b1a0be3da63f88a">  745</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aef26eee31ed75a757b1a0be3da63f88a" title="Obtain the specified lock level upon the given object. ">Lock</a>(<span class="keywordtype">object</span> obj, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                FireLock(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_lock_event.html" title="Defines an event class for the locking of an entity. ">LockEvent</a>(obj, lockMode, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7a7e95820fdcb92bb983cc196b170593">  753</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7a7e95820fdcb92bb983cc196b170593" title="Obtain the specified lock level upon the given object. ">Lock</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                FireLock(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_lock_event.html" title="Defines an event class for the locking of an entity. ">LockEvent</a>(entityName, obj, lockMode, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a1766ca82626fce056f89caf1fe518cdb">  767</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_query.html" title="An object-oriented representation of a NHibernate query. ">IQuery</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a1766ca82626fce056f89caf1fe518cdb">CreateFilter</a>(<span class="keywordtype">object</span> collection, <span class="keywordtype">string</span> queryString)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <a class="code" href="class_n_hibernate_1_1_impl_1_1_collection_filter_impl.html" title="Implementation of the IQuery interface for collection filters. ">CollectionFilterImpl</a> filter =</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_collection_filter_impl.html" title="Implementation of the IQuery interface for collection filters. ">CollectionFilterImpl</a>(queryString, collection, <span class="keyword">this</span>,</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                                             GetFilterQueryPlan(collection, queryString, null, <span class="keyword">false</span>).<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_parameter_metadata.html" title="Encapsulates metadata about parameters encountered within a query. ">ParameterMetadata</a>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="comment">//filter.SetComment(queryString);</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <span class="keywordflow">return</span> filter;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keyword">private</span> <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_filter_query_plan.html" title="Extends an HQLQueryPlan to maintain a reference to the collection-role name being filtered...">FilterQueryPlan</a> GetFilterQueryPlan(<span class="keywordtype">object</span> collection, <span class="keywordtype">string</span> filter, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> parameters, <span class="keywordtype">bool</span> shallow)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="keywordflow">if</span> (collection == null)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;collection&quot;</span>, <span class="stringliteral">&quot;null collection passed to filter&quot;</span>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_collection_entry.html" title="We need an entry to tell us all about the current state of a collection with respect to its persisten...">CollectionEntry</a> entry = persistenceContext.GetCollectionEntryOrNull(collection);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html" title="A strategy for persisting a collection role. ">ICollectionPersister</a> roleBeforeFlush = (entry == null) ? null : entry.LoadedPersister;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_filter_query_plan.html" title="Extends an HQLQueryPlan to maintain a reference to the collection-role name being filtered...">FilterQueryPlan</a> plan;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                if (roleBeforeFlush == null)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                    <span class="comment">// if it was previously unreferenced, we need to flush in order to</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                    <span class="comment">// get its state into the database in order to execute query</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                    <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5a75f33789f924a80667bcdf8e195c1a1d" title="Xml value: flush">Flush</a>();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                    entry = persistenceContext.GetCollectionEntryOrNull(collection);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html" title="A strategy for persisting a collection role. ">ICollectionPersister</a> roleAfterFlush = (entry == null) ? null : entry.LoadedPersister;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                    if (roleAfterFlush == null)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                    {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_query_exception.html" title="A problem occurred translating a Hibernate query to SQL due to invalid query syntax, etc. ">QueryException</a>(<span class="stringliteral">&quot;The collection was unreferenced&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                    plan = Factory.QueryPlanCache.GetFilterQueryPlan(filter, roleAfterFlush.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html#a5eba937a3512d2f4644ddebb448613d2" title="Get the name of this collection role (the fully qualified class name, extended by a &quot;property path&quot;) ...">Role</a>, shallow, EnabledFilters);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                    <span class="comment">// otherwise, we only need to flush if there are in-memory changes</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                    <span class="comment">// to the queried tables</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                    plan = Factory.QueryPlanCache.GetFilterQueryPlan(filter, roleBeforeFlush.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html#a5eba937a3512d2f4644ddebb448613d2" title="Get the name of this collection role (the fully qualified class name, extended by a &quot;property path&quot;) ...">Role</a>, shallow, EnabledFilters);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                    <span class="keywordflow">if</span> (AutoFlushIfRequired(plan.QuerySpaces))</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                        <span class="comment">// might need to run a different filter entirely after the flush</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                        <span class="comment">// because the collection role may have changed</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                        entry = persistenceContext.GetCollectionEntryOrNull(collection);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                        <a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html" title="A strategy for persisting a collection role. ">ICollectionPersister</a> roleAfterFlush = (entry == null) ? null : entry.LoadedPersister;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                        if (roleBeforeFlush != roleAfterFlush)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                        {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                            <span class="keywordflow">if</span> (roleAfterFlush == null)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                            {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                                <span class="keywordflow">throw</span> <span class="keyword">new</span> QueryException(<span class="stringliteral">&quot;The collection was dereferenced&quot;</span>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                            }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                            plan = Factory.QueryPlanCache.GetFilterQueryPlan(filter, roleAfterFlush.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html#a5eba937a3512d2f4644ddebb448613d2" title="Get the name of this collection role (the fully qualified class name, extended by a &quot;property path&quot;) ...">Role</a>, shallow, EnabledFilters);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                <span class="keywordflow">if</span> (parameters != null)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                    parameters.<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html#a8ef221da60e3baaf72eccd6ae2172e33" title="Gets or sets an array of object objects that is stored at the index of the Parameter. ">PositionalParameterValues</a>[0] = entry.LoadedKey;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                    parameters.<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html#aef9ff7969d17eabc0a5f8415603b5305" title="Gets or sets an array of IType objects that is stored at the index of the Parameter. ">PositionalParameterTypes</a>[0] = entry.LoadedPersister.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html#a9b8a1acbdff7f58d023d0cbb307c424b" title="Get the &quot;key&quot; type (the type of the foreign key) ">KeyType</a>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                <span class="keywordflow">return</span> plan;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a81fdde0594eb1742710bf8d4872df0c5">  840</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a81fdde0594eb1742710bf8d4872df0c5" title="Instantiate the entity class, initializing with the given identifier ">Instantiate</a>(<span class="keywordtype">string</span> clazz, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                <span class="keywordflow">return</span> Instantiate(Factory.GetEntityPersister(clazz), id);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keyword">public</span> <a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a> <a class="code" href="class_n_hibernate_1_1_engine_1_1_action_queue.html" title="Responsible for maintaining the queue of actions related to events. ">ActionQueue</a></div>
<div class="line"><a name="l00850"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae0a12d46311c1fc58e4e049532b12ed4">  850</a></span>&#160;        {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                <span class="keywordflow">return</span> actionQueue;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00864"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6396ce51e7c46a6e619b9d1f5aa6caec">  864</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6396ce51e7c46a6e619b9d1f5aa6caec" title="Give the interceptor an opportunity to override the default instantiation ">Instantiate</a>(<a class="code" href="interface_n_hibernate_1_1_persister_1_1_entity_1_1_i_entity_persister.html" title="Concrete IEntityPersisters implement mapping and persistence logic for a particular class...">IEntityPersister</a> persister, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                ErrorIfClosed();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <span class="keywordtype">object</span> result = interceptor.<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html#a28040f9e2745289e5f99e71c070f959d" title="Instantiate the entity class. Return  to indicate that Hibernate should use the default constructor o...">Instantiate</a>(persister.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_entity_1_1_i_entity_persister.html#aafee25e1fbeb50a9723190bd171bc3e8" title="The entity name which this persister maps. ">EntityName</a>, entityMode, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                <span class="keywordflow">if</span> (result == null)</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                    result = persister.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_entity_1_1_i_entity_persister.html#a12bebd39e9733a880810c57b4891e42f" title="Create a class instance initialized with the given identifier ">Instantiate</a>(<span class="keywordtype">id</span>, entityMode);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            }</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="preprocessor">        #region IEventSource Members</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="preprocessor"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> ForceFlush(<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html" title="We need an entry to tell us all about the current state of an object with respect to its persistent s...">EntityEntry</a> entityEntry)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                <span class="keywordflow">if</span> (log.IsDebugEnabled)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                    log.Debug(<span class="stringliteral">&quot;flushing to force deletion of re-saved object: &quot;</span> +</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                              <a class="code" href="class_n_hibernate_1_1_impl_1_1_message_helper.html" title="Helper methods for rendering log messages and exception messages ">MessageHelper</a>.<a class="code" href="class_n_hibernate_1_1_impl_1_1_message_helper.html#ada76fc0d2bcc384b222ac60f296dfdcd" title="Generate small message that can be used in traces and exception messages. ">InfoString</a>(entityEntry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#a2089e84125ec53db36c17a5b3bdb2e68" title="Gets or sets the IEntityPersister that is responsible for this Entity. ">Persister</a>, entityEntry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#ad238df458a7b764df16e44e24d8834a7" title="Gets or sets the identifier of the Entity in the database. ">Id</a>, Factory));</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                <span class="keywordflow">if</span> (persistenceContext.CascadeLevel &gt; 0)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_object_deleted_exception.html" title="Thrown when the user tries to pass a deleted object to the ISession. ">ObjectDeletedException</a>(</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                        <span class="stringliteral">&quot;deleted object would be re-saved by cascade (remove deleted object from associations)&quot;</span>,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                        entityEntry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#ad238df458a7b764df16e44e24d8834a7" title="Gets or sets the identifier of the Entity in the database. ">Id</a>,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                        entityEntry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#ab0395015de26aa20f11bf547dc5974f9" title="Gets the Fully Qualified Name of the class this Entity is an instance of. ">EntityName</a>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5a75f33789f924a80667bcdf8e195c1a1d" title="Xml value: flush">Flush</a>();</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ace16a53df3a7570b1ab5b549009f47a5">  904</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ace16a53df3a7570b1ab5b549009f47a5" title="Cascade merge an entity instance">Merge</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, IDictionary copiedAlready)</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                FireMerge(copiedAlready, <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_merge_event.html" title="An event class for merge() and saveOrUpdateCopy() ">MergeEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa4d438d982e7408a7d92311f4ee1b3b5">  913</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa4d438d982e7408a7d92311f4ee1b3b5" title="Cascade persist an entity instance">Persist</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, IDictionary createdAlready)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                FirePersist(createdAlready, <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa0314831c018fe49147250f37b2764a8">  922</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa0314831c018fe49147250f37b2764a8" title="Cascade persist an entity instance during the flush process">PersistOnFlush</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, IDictionary copiedAlready)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                FirePersistOnFlush(copiedAlready, <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a02b90543fe9c468e037adaf4f8caf08c">  931</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a02b90543fe9c468e037adaf4f8caf08c" title="Cascade refresh an entity instance">Refresh</a>(<span class="keywordtype">object</span> obj, IDictionary refreshedAlready)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                FireRefresh(refreshedAlready, <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_refresh_event.html" title="Defines an event class for the refreshing of an object. ">RefreshEvent</a>(obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        </div>
<div class="line"><a name="l00940"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7a1de8652f8a0e2250ad84b519670d58">  940</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7a1de8652f8a0e2250ad84b519670d58" title="Cascade delete an entity instance">Delete</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> child, <span class="keywordtype">bool</span> isCascadeDeleteEnabled, ISet&lt;object&gt; transientEntities)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                FireDelete(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_delete_event.html" title="Defines an event class for the deletion of an entity. ">DeleteEvent</a>(entityName, child, isCascadeDeleteEnabled, <span class="keyword">this</span>), transientEntities);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00950"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ac260cb03fa728b3c00cda5a0594ae8ff">  950</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ac260cb03fa728b3c00cda5a0594ae8ff" title="Copy the state of the given object onto the persistent object with the same identifier. If there is no persistent instance currently associated with the session, it will be loaded. Return the persistent instance. If the given instance is unsaved, save a copy of and return it as a newly persistent instance. The given instance does not become associated with the session. This operation cascades to associated instances if the association is mapped with cascade=&quot;merge&quot;.  The semantics of this method are defined by JSR-220. Name of the entity.a detached instance with state to be copied an updated persistent instance ">Merge</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                <span class="keywordflow">return</span> FireMerge(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_merge_event.html" title="An event class for merge() and saveOrUpdateCopy() ">MergeEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div>
<div class="line"><a name="l00958"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8a6288de4833d067536ab194015b8be0">  958</a></span>&#160;        <span class="keyword">public</span> T Merge&lt;T&gt;(T entity) where T : <span class="keyword">class</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            <span class="keywordflow">return</span> (T)<a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5a68be4837f6c739877233e527a996dd00" title="Xml value: merge">Merge</a>((<span class="keywordtype">object</span>)entity);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5cb90358a8ea134e20944d31c8b579f4">  963</a></span>&#160;        <span class="keyword">public</span> T Merge&lt;T&gt;(<span class="keywordtype">string</span> entityName, T entity) where T : <span class="keyword">class</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <span class="keywordflow">return</span> (T)<a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5a68be4837f6c739877233e527a996dd00" title="Xml value: merge">Merge</a>(entityName, (<span class="keywordtype">object</span>)entity);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a026d736a00c4b166d33a6c94f3da7ed6">  968</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a026d736a00c4b166d33a6c94f3da7ed6" title="Copy the state of the given object onto the persistent object with the same identifier. If there is no persistent instance currently associated with the session, it will be loaded. Return the persistent instance. If the given instance is unsaved, save a copy of and return it as a newly persistent instance. The given instance does not become associated with the session. This operation cascades to associated instances if the association is mapped with cascade=&quot;merge&quot;.  The semantics of this method are defined by JSR-220. ">Merge</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5a68be4837f6c739877233e527a996dd00" title="Xml value: merge">Merge</a>(null, obj);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5e85d806cb6b8ae45de10a3ad947ae3c">  976</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5e85d806cb6b8ae45de10a3ad947ae3c" title="Make a transient instance persistent. This operation cascades to associated instances if the associat...">Persist</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                FirePersist(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div>
<div class="line"><a name="l00984"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab2a9e28ee5f3ae07d18c77f2507d5d8c">  984</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab2a9e28ee5f3ae07d18c77f2507d5d8c" title="Make a transient instance persistent. This operation cascades to associated instances if the associat...">Persist</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                Persist(null, obj);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> PersistOnFlush(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                FirePersistOnFlush(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a>(entityName, obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> PersistOnFlush(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                Persist(null, obj);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_n_hibernate.html#a32964983bec6b37f749177ca8882a191" title="Represents a flushing strategy. ">FlushMode</a> <a class="code" href="namespace_n_hibernate.html#a32964983bec6b37f749177ca8882a191" title="Represents a flushing strategy. ">FlushMode</a></div>
<div class="line"><a name="l01010"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa56a6e314eead0cdf279c2f10c01b82a"> 1010</a></span>&#160;        {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> flushMode; }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            set { flushMode = value; }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> FlushBeforeCompletionEnabled</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> flushBeforeCompletionEnabled; }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3b2c814cef0cba30e49f7b3e16157a6c"> 1020</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3b2c814cef0cba30e49f7b3e16157a6c" title="The best guess entity name for an entity not in an association">BestGuessEntityName</a>(<span class="keywordtype">object</span> entity)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <span class="keywordflow">if</span> (entity.IsProxy())</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a> proxy = entity as <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html">ILazyInitializer</a> initializer = proxy.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html#a1f918fc4c018602cc97d96eb33920327" title="Get the underlying lazy initialization handler. ">HibernateLazyInitializer</a>;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                    <span class="comment">// it is possible for this method to be called during flush processing,</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                    <span class="comment">// so make certain that we do not accidently initialize an uninitialized proxy</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                    <span class="keywordflow">if</span> (initializer.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#ab830ae6f52e70f31c67b6b615322dd48" title="Is the proxy uninitialzed? ">IsUninitialized</a>)</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                    {</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                        <span class="keywordflow">return</span> initializer.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a56488f581f8018abc9778f62149449aa" title="Get the actual class of the entity. Generally, EntityName should be used instead. ...">PersistentClass</a>.FullName;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                    }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                    entity = initializer.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a3ba5cfd1da095db7c159f9fe80f2dd3c" title="Return the underlying persistent object, initializing if necessary. ">GetImplementation</a>();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="keywordflow">if</span> (FieldInterceptionHelper.IsInstrumented(entity))</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                    <span class="comment">// NH: support of field-interceptor-proxy</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_intercept_1_1_i_field_interceptor.html" title="Contract for field interception handlers. ">IFieldInterceptor</a> interceptor = FieldInterceptionHelper.ExtractFieldInterceptor(entity);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                    <span class="keywordflow">return</span> interceptor.<a class="code" href="interface_n_hibernate_1_1_intercept_1_1_i_field_interceptor.html#a67ae001a00a24825edb8799c264f87fd" title="Get the entity-name of the field DeclaringType.">EntityName</a>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html" title="We need an entry to tell us all about the current state of an object with respect to its persistent s...">EntityEntry</a> entry = persistenceContext.GetEntry(entity);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="keywordflow">if</span> (entry == null)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                    <span class="keywordflow">return</span> GuessEntityName(entity);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <span class="keywordflow">return</span> entry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#a2089e84125ec53db36c17a5b3bdb2e68" title="Gets or sets the IEntityPersister that is responsible for this Entity. ">Persister</a>.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_entity_1_1_i_entity_persister.html#aafee25e1fbeb50a9723190bd171bc3e8" title="The entity name which this persister maps. ">EntityName</a>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
<div class="line"><a name="l01055"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a1565adf8caa01b12b4ebf6148a689875"> 1055</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a1565adf8caa01b12b4ebf6148a689875" title="The guessed entity name for an entity not in an association">GuessEntityName</a>(<span class="keywordtype">object</span> entity)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                <span class="keywordtype">string</span> entityName = interceptor.<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html#a931994e10a899e64b55ac98760ab79bd" title="Get the entity name for a persistent or transient instance">GetEntityName</a>(entity);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                <span class="keywordflow">if</span> (entityName == null)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    System.Type t = entity.GetType();</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                    entityName = Factory.TryGetGuessEntityName(t) ?? t.FullName;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                <span class="keywordflow">return</span> entityName;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> IsEventSource</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div>
<div class="line"><a name="l01077"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6dfc4ed14de9266f9ffe0eb3b0a3726f"> 1077</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6dfc4ed14de9266f9ffe0eb3b0a3726f" title="Get the entity instance associated with the given Key, calling the Interceptor if necessary ...">GetEntityUsingInterceptor</a>(<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_key.html" title="A globally unique identifier of an instance, consisting of the user-visible identifier and the identi...">EntityKey</a> key)</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                <span class="comment">// todo : should this get moved to PersistentContext?</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="comment">// logically, is PersistentContext the &quot;thing&quot; to which an interceptor gets attached?</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <span class="keywordtype">object</span> result = persistenceContext.GetEntity(key);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                <span class="keywordflow">if</span> (result == null)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    <span class="keywordtype">object</span> newObject = interceptor.<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html#a3c60285bc5aa76052189abd43311025d" title="Get a fully loaded entity instance that is cached externally">GetEntity</a>(key.EntityName, key.Identifier);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    <span class="keywordflow">if</span> (newObject != null)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                        <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5ab485167c5b0e59d47009a16f90fe2659" title="Xml value: lock">Lock</a>(newObject, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a>.<a class="code" href="class_n_hibernate_1_1_lock_mode.html#a5a88ad4e385f739dbd6657e55bebdf9a" title="No lock required. ">None</a>);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                    <span class="keywordflow">return</span> newObject;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="interface_n_hibernate_1_1_engine_1_1_i_persistence_context.html" title="Holds the state of the persistence context, including the first-level cache, entries, snapshots, proxies, etc. ">IPersistenceContext</a> PersistenceContext</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                <span class="keywordflow">return</span> persistenceContext;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> AutoFlushIfRequired(ISet&lt;string&gt; querySpaces)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            {</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                <span class="keywordflow">if</span> (!TransactionInProgress)</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                    <span class="comment">// do not auto-flush while outside a transaction</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                <a class="code" href="class_n_hibernate_1_1_event_1_1_auto_flush_event.html" title="Defines an event class for the auto-flushing of a session. ">AutoFlushEvent</a> autoFlushEvent = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_auto_flush_event.html" title="Defines an event class for the auto-flushing of a session. ">AutoFlushEvent</a>(querySpaces, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_auto_flush_event_listener.html" title="Defines the contract for handling of session auto-flush events. ">IAutoFlushEventListener</a>[] autoFlushEventListener = listeners.AutoFlushEventListeners;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; autoFlushEventListener.Length; i++)</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                    autoFlushEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_auto_flush_event_listener.html#ae99afc02a0fc59db2cdc296ecc317587" title="Handle the given auto-flush event. ">OnAutoFlush</a>(autoFlushEvent);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                <span class="keywordflow">return</span> autoFlushEvent.FlushRequired;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="preprocessor">        #region load()/get() operations</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01139"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8c7e6604936dd1989694fed12aa58891"> 1139</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8c7e6604936dd1989694fed12aa58891" title="Read the persistent state associated with the given identifier into the given transient instance...">Load</a>(<span class="keywordtype">object</span> obj, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a> loadEvent = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a>(<span class="keywordtype">id</span>, obj, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                FireLoad(loadEvent, LoadEventListener.Reload);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div>
<div class="line"><a name="l01148"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa0cce7ec93d58e9483b8cc43d3734d38"> 1148</a></span>&#160;        <span class="keyword">public</span> T Load&lt;T&gt;(<span class="keywordtype">object</span> id)</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                <span class="keywordflow">return</span> (T)<a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5af19dbf2edb3a0bd74b0524d960ff21eb" title="Xml value: load">Load</a>(typeof(T), <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01156"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a006767a121c7802f8dc9b4827d393587"> 1156</a></span>&#160;        <span class="keyword">public</span> T Load&lt;T&gt;(<span class="keywordtype">object</span> id, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                <span class="keywordflow">return</span> (T)<a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5af19dbf2edb3a0bd74b0524d960ff21eb" title="Xml value: load">Load</a>(typeof(T), <span class="keywordtype">id</span>, lockMode);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div>
<div class="line"><a name="l01178"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#afeb4fd935cf957309e466cd6038ab5a9"> 1178</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#afeb4fd935cf957309e466cd6038ab5a9" title="Load the data for the object with the specified id into a newly created object using &quot;for update&quot;...">Load</a>(System.Type entityClass, <span class="keywordtype">object</span> <span class="keywordtype">id</span>, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5af19dbf2edb3a0bd74b0524d960ff21eb" title="Xml value: load">Load</a>(entityClass.FullName, <span class="keywordtype">id</span>, lockMode);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div>
<div class="line"><a name="l01186"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#acadcd796b163b15bbd663de964d6bbc3"> 1186</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#acadcd796b163b15bbd663de964d6bbc3" title="Return the persistent instance of the given entityName  with the given identifier, assuming that the instance exists. ">Load</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == null)</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;null is not a valid identifier&quot;</span>);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                var @<span class="keyword">event</span> = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a>(<span class="keywordtype">id</span>, entityName, <span class="keyword">false</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                    FireLoad(@event, LoadEventListener.Load);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                    <span class="keywordflow">if</span> (@event.Result == null)</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                    {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                        Factory.EntityNotFoundDelegate.HandleEntityNotFound(entityName, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                    }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                    <span class="keywordflow">return</span> @<span class="keyword">event</span>.Result;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aef5b59935fadc6023a4f36696563c69d"> 1214</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aef5b59935fadc6023a4f36696563c69d" title="Return the persistent instance of the given entity class with the given identifier, obtaining the specified lock mode, assuming the instance exists. ">Load</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> <span class="keywordtype">id</span>, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                var @<span class="keyword">event</span> = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a>(<span class="keywordtype">id</span>, entityName, lockMode, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                FireLoad(@event, LoadEventListener.Load);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                <span class="keywordflow">return</span> @<span class="keyword">event</span>.Result;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div>
<div class="line"><a name="l01224"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3db9bffa474297cb5c7a2295bf45aea6"> 1224</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3db9bffa474297cb5c7a2295bf45aea6" title="Return the persistent instance of the given entity class with the given identifier, assuming that the instance exists. ">Load</a>(System.Type entityClass, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_n_hibernate_1_1_event.html#a753aef6abc4249b69e2771f5b8fb41f5af19dbf2edb3a0bd74b0524d960ff21eb" title="Xml value: load">Load</a>(entityClass.FullName, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ad73cb93d2cf5a675b217c6f99ddc8f22"> 1232</a></span>&#160;        <span class="keyword">public</span> T Get&lt;T&gt;(<span class="keywordtype">object</span> id)</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                <span class="keywordflow">return</span> (T)<a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5ac55582518cba2c464f29f5bae1c68def" title="The session may read items from the cache, but will not add items, except to invalidate items when up...">Get</a>(typeof(T), <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div>
<div class="line"><a name="l01240"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3ab857deee1b5983e060ab2efab257e5"> 1240</a></span>&#160;        <span class="keyword">public</span> T Get&lt;T&gt;(<span class="keywordtype">object</span> id, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                <span class="keywordflow">return</span> (T)<a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5ac55582518cba2c464f29f5bae1c68def" title="The session may read items from the cache, but will not add items, except to invalidate items when up...">Get</a>(typeof(T), <span class="keywordtype">id</span>, lockMode);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            }</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        }</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01248"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ac2eb191c04967977095036a9a5c611fd"> 1248</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ac2eb191c04967977095036a9a5c611fd" title="Return the persistent instance of the given entity class with the given identifier, or null if there is no such persistent instance. (If the instance, or a proxy for the instance, is already associated with the session, return that instance or proxy.) ">Get</a>(System.Type entityClass, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5ac55582518cba2c464f29f5bae1c68def" title="The session may read items from the cache, but will not add items, except to invalidate items when up...">Get</a>(entityClass.FullName, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        }</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af476e8ccbd67e885ff5bb58cf2e43386"> 1267</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af476e8ccbd67e885ff5bb58cf2e43386" title="Load the data for the object with the specified id into a newly created object using &quot;for update&quot;...">Get</a>(System.Type clazz, <span class="keywordtype">object</span> <span class="keywordtype">id</span>, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a> loadEvent = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a>(<span class="keywordtype">id</span>, clazz.FullName, lockMode, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                FireLoad(loadEvent, LoadEventListener.Get);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                <span class="keywordflow">return</span> loadEvent.Result;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div>
<div class="line"><a name="l01277"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab2680e1ea669585c387ffc6bff8038e6"> 1277</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab2680e1ea669585c387ffc6bff8038e6" title="Return the entity name for a persistent entity ">GetEntityName</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                <span class="keywordflow">if</span> (obj.IsProxy())</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                    var proxy = obj as <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                    <span class="keywordflow">if</span> (!persistenceContext.ContainsProxy(proxy))</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                    {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_transient_object_exception.html" title="Throw when the user passes a transient instance to a ISession method that expects a persistent instan...">TransientObjectException</a>(<span class="stringliteral">&quot;proxy was not associated with the session&quot;</span>);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                    }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html">ILazyInitializer</a> li = proxy.HibernateLazyInitializer;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                    obj = li.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a3ba5cfd1da095db7c159f9fe80f2dd3c" title="Return the underlying persistent object, initializing if necessary. ">GetImplementation</a>();</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                }</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html" title="We need an entry to tell us all about the current state of an object with respect to its persistent s...">EntityEntry</a> entry = persistenceContext.GetEntry(obj);</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                <span class="keywordflow">if</span> (entry == null)</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_transient_object_exception.html" title="Throw when the user passes a transient instance to a ISession method that expects a persistent instan...">TransientObjectException</a>(</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                        <span class="stringliteral">&quot;object references an unsaved transient instance - save the transient instance before flushing or set cascade action for the property to something that would make it autosave: &quot;</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                        + obj.GetType().FullName);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                <span class="keywordflow">return</span> entry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#a2089e84125ec53db36c17a5b3bdb2e68" title="Gets or sets the IEntityPersister that is responsible for this Entity. ">Persister</a>.<a class="code" href="interface_n_hibernate_1_1_persister_1_1_entity_1_1_i_entity_persister.html#aafee25e1fbeb50a9723190bd171bc3e8" title="The entity name which this persister maps. ">EntityName</a>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae86ab73903e927917dc692ef6aa66fb5"> 1307</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae86ab73903e927917dc692ef6aa66fb5" title="Return the persistent instance of the given named entity with the given identifier, or null if there is no such persistent instance. (If the instance, or a proxy for the instance, is already associated with the session, return that instance or proxy.) ">Get</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a> loadEvent = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a>(<span class="keywordtype">id</span>, entityName, <span class="keyword">false</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                    FireLoad(loadEvent, LoadEventListener.Get);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                    <span class="keywordflow">return</span> loadEvent.Result;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div>
<div class="line"><a name="l01331"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae7dfe8045faf4de7b4f2073ac8e9ba69"> 1331</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae7dfe8045faf4de7b4f2073ac8e9ba69" title="Load the data for the object with the specified id into a newly created object. This is only called w...">ImmediateLoad</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                <span class="keywordflow">if</span> (log.IsDebugEnabled)</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_persister_1_1_entity_1_1_i_entity_persister.html" title="Concrete IEntityPersisters implement mapping and persistence logic for a particular class...">IEntityPersister</a> persister = Factory.GetEntityPersister(entityName);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                    log.Debug(<span class="stringliteral">&quot;initializing proxy: &quot;</span> + <a class="code" href="class_n_hibernate_1_1_impl_1_1_message_helper.html" title="Helper methods for rendering log messages and exception messages ">MessageHelper</a>.<a class="code" href="class_n_hibernate_1_1_impl_1_1_message_helper.html#ada76fc0d2bcc384b222ac60f296dfdcd" title="Generate small message that can be used in traces and exception messages. ">InfoString</a>(persister, <span class="keywordtype">id</span>, Factory));</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a> loadEvent = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a>(<span class="keywordtype">id</span>, entityName, <span class="keyword">true</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                FireLoad(loadEvent, LoadEventListener.ImmediateLoad);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="keywordflow">return</span> loadEvent.Result;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            }</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div>
<div class="line"><a name="l01352"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6cdd98f3fb579ca4c5d48e6c384b6313"> 1352</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6cdd98f3fb579ca4c5d48e6c384b6313" title="Return the object with the specified id or throw exception if no row with that id exists...">InternalLoad</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> eager, <span class="keywordtype">bool</span> isNullable)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                <span class="comment">// todo : remove</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <a class="code" href="class_n_hibernate_1_1_event_1_1_load_type.html">LoadType</a> type = isNullable</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                                    ? LoadEventListener.InternalLoadNullable</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                                    : (eager ? LoadEventListener.InternalLoadEager : LoadEventListener.InternalLoadLazy);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a> loadEvent = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a>(<span class="keywordtype">id</span>, entityName, <span class="keyword">true</span>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                FireLoad(loadEvent, type);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                <span class="keywordflow">if</span> (!isNullable)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                {</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                    <a class="code" href="class_n_hibernate_1_1_unresolvable_object_exception.html" title="Thrown when Hibernate could not resolve an object by id, especially when loading an association...">UnresolvableObjectException</a>.ThrowIfNull(loadEvent.Result, <span class="keywordtype">id</span>, entityName);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                <span class="keywordflow">return</span> loadEvent.Result;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01372"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9d33f65aee4f96e01cbd6b7e52599e21"> 1372</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9d33f65aee4f96e01cbd6b7e52599e21" title="Re-read the state of the given instance from the underlying database. ">Refresh</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                FireRefresh(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_refresh_event.html" title="Defines an event class for the refreshing of an object. ">RefreshEvent</a>(obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div>
<div class="line"><a name="l01380"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab49fe9625bf322f29a88c564f177f26e"> 1380</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab49fe9625bf322f29a88c564f177f26e" title="Re-read the state of the given instance from the underlying database, with the given LockMode...">Refresh</a>(<span class="keywordtype">object</span> obj, <a class="code" href="class_n_hibernate_1_1_lock_mode.html" title="Instances represent a lock mode for a row of a relational database table. ">LockMode</a> lockMode)</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                FireRefresh(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_refresh_event.html" title="Defines an event class for the refreshing of an object. ">RefreshEvent</a>(obj, lockMode, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            }</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a759d6e2840f75034b359ae21604260f4"> 1388</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_transaction.html" title="Allows the application to define units of work, while maintaining abstraction from the underlying tra...">ITransaction</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a759d6e2840f75034b359ae21604260f4" title="Begin a transaction with the specified isolationLevel ">BeginTransaction</a>(IsolationLevel isolationLevel)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                <span class="keywordflow">if</span> (rootSession != null)</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                {</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                    <span class="comment">// Todo : should seriously consider not allowing a txn to begin from a child session</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                    <span class="comment">//      can always route the request to the root session...</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                    log.Warn(<span class="stringliteral">&quot;Transaction started on non-root session&quot;</span>);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                <span class="keywordflow">return</span> connectionManager.BeginTransaction(isolationLevel);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div>
<div class="line"><a name="l01404"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab6e51d0d184edd96d7a3bed8e912c77e"> 1404</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_transaction.html" title="Allows the application to define units of work, while maintaining abstraction from the underlying tra...">ITransaction</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ab6e51d0d184edd96d7a3bed8e912c77e" title="Begin a unit of work and return the associated ITransaction object. ">BeginTransaction</a>()</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                <span class="keywordflow">if</span> (rootSession != null)</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                    <span class="comment">// Todo : should seriously consider not allowing a txn to begin from a child session</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                    <span class="comment">//      can always route the request to the root session...</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                    log.Warn(<span class="stringliteral">&quot;Transaction started on non-root session&quot;</span>);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                }</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                <span class="keywordflow">return</span> connectionManager.BeginTransaction();</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            }</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_transaction.html" title="Allows the application to define units of work, while maintaining abstraction from the underlying tra...">ITransaction</a> Transaction</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> connectionManager.Transaction; }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div>
<div class="line"><a name="l01446"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6b2ac50930e067854262e92d52aa84a5"> 1446</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6b2ac50930e067854262e92d52aa84a5">Flush</a>()</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                <span class="keywordflow">if</span> (persistenceContext.CascadeLevel &gt; 0)</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_hibernate_exception.html" title="Any exception that occurs in the O-R persistence layer. ">HibernateException</a>(<span class="stringliteral">&quot;Flush during cascade is dangerous&quot;</span>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_flush_event_listener.html" title="Defines the contract for handling of session flush events. ">IFlushEventListener</a>[] flushEventListener = listeners.FlushEventListeners;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; flushEventListener.Length; i++)</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                    flushEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_flush_event_listener.html#a9dbcfd37738e6f3a83cdfc76a0788147" title="Handle the given flush event. ">OnFlush</a>(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_flush_event.html" title="Defines an event class for the flushing of a session. ">FlushEvent</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> TransactionInProgress</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        {</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                <span class="keywordflow">return</span> !IsClosed &amp;&amp; Transaction.IsActive;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aabc02444d3f9497801f1b018e95c5363"> 1471</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aabc02444d3f9497801f1b018e95c5363" title="Does this ISession contain any changes which must be synchronized with the database? Would any SQL be executed if we flushed this session? ">IsDirty</a>()</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            {</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                log.Debug(<span class="stringliteral">&quot;checking session dirtiness&quot;</span>);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                <span class="keywordflow">if</span> (actionQueue.AreInsertionsOrDeletionsQueued)</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                    log.Debug(<span class="stringliteral">&quot;session dirty (scheduled updates and insertions)&quot;</span>);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                    <a class="code" href="class_n_hibernate_1_1_event_1_1_dirty_check_event.html" title="Defines an event class for the dirty-checking of a session. ">DirtyCheckEvent</a> dcEvent = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_dirty_check_event.html" title="Defines an event class for the dirty-checking of a session. ">DirtyCheckEvent</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_dirty_check_event_listener.html" title="Defines the contract for handling of session dirty-check events.">IDirtyCheckEventListener</a>[] dirtyCheckEventListener = listeners.DirtyCheckEventListeners;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dirtyCheckEventListener.Length; i++)</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                    {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                        dirtyCheckEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_dirty_check_event_listener.html#a9cccf0b79d287e2bf5cb47ea10cb835d" title="Handle the given dirty-check event. ">OnDirtyCheck</a>(dcEvent);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                    <span class="keywordflow">return</span> dcEvent.Dirty;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;            }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        }</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div>
<div class="line"><a name="l01501"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a89912a0c21a9f905b842175b9ef916a2"> 1501</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a89912a0c21a9f905b842175b9ef916a2" title="Not for internal use ">GetIdentifier</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                <span class="comment">// Actually the case for proxies will probably work even with</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                <span class="comment">// the session closed, but do the check here anyway, so that</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                <span class="comment">// the behavior is uniform.</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                <span class="keywordflow">if</span> (obj.IsProxy())</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                {</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                    var proxy = obj as <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html">ILazyInitializer</a> li = proxy.HibernateLazyInitializer;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                    <span class="keywordflow">if</span> (li.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a196a93f7c9413ec2f79d38ab27042b63" title="Get the session to which this proxy is associated, or null if it is not attached. ...">Session</a> != <span class="keyword">this</span>)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                    {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_transient_object_exception.html" title="Throw when the user passes a transient instance to a ISession method that expects a persistent instan...">TransientObjectException</a>(<span class="stringliteral">&quot;The proxy was not associated with this session&quot;</span>);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                    }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                    <span class="keywordflow">return</span> li.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a7d406a4ddfbe61eb160ca83034d4e300" title="The identifier value for the entity our owning proxy represents. ">Identifier</a>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html" title="We need an entry to tell us all about the current state of an object with respect to its persistent s...">EntityEntry</a> entry = persistenceContext.GetEntry(obj);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                <span class="keywordflow">if</span> (entry == null)</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_transient_object_exception.html" title="Throw when the user passes a transient instance to a ISession method that expects a persistent instan...">TransientObjectException</a>(<span class="stringliteral">&quot;the instance was not associated with this session&quot;</span>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                <span class="keywordflow">return</span> entry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#ad238df458a7b764df16e44e24d8834a7" title="Gets or sets the identifier of the Entity in the database. ">Id</a>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            }</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a973673337bc2728d67595fcf090607f6"> 1537</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">object</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a973673337bc2728d67595fcf090607f6" title="Get the id value for an object that is actually associated with the session. This is a bit stricter t...">GetContextEntityIdentifier</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                <span class="keywordflow">if</span> (obj.IsProxy())</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a> proxy = obj as <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                    <span class="keywordflow">return</span> proxy.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html#a1f918fc4c018602cc97d96eb33920327" title="Get the underlying lazy initialization handler. ">HibernateLazyInitializer</a>.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a7d406a4ddfbe61eb160ca83034d4e300" title="The identifier value for the entity our owning proxy represents. ">Identifier</a>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                {</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                    <a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html" title="We need an entry to tell us all about the current state of an object with respect to its persistent s...">EntityEntry</a> entry = persistenceContext.GetEntry(obj);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                    <span class="keywordflow">return</span> (entry != null) ? entry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#ad238df458a7b764df16e44e24d8834a7" title="Gets or sets the identifier of the Entity in the database. ">Id</a> : null;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                }</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        <span class="keyword">internal</span> <a class="code" href="interface_n_hibernate_1_1_persister_1_1_collection_1_1_i_collection_persister.html" title="A strategy for persisting a collection role. ">ICollectionPersister</a> GetCollectionPersister(<span class="keywordtype">string</span> role)</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            {</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                <span class="keywordflow">return</span> Factory.GetCollectionPersister(role);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div>
<div class="line"><a name="l01568"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3bf8bc7a0d0ef3f4df495a4c07017e05"> 1568</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3bf8bc7a0d0ef3f4df495a4c07017e05" title="called by a collection that wants to initialize itself ">InitializeCollection</a>(<a class="code" href="interface_n_hibernate_1_1_collection_1_1_i_persistent_collection.html">IPersistentCollection</a> collection, <span class="keywordtype">bool</span> writing)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_initialize_collection_event_listener.html" title="Defines the contract for handling of collection initialization events generated by a session...">IInitializeCollectionEventListener</a>[] listener = listeners.InitializeCollectionEventListeners;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; listener.Length; i++)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                    listener[i].OnInitializeCollection(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_initialize_collection_event.html" title="An event that occurs when a collection wants to be initialized ">InitializeCollectionEvent</a>(collection, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        }</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IDbConnection Connection</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> connectionManager.GetConnection(); }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> IsConnected</div>
<div class="line"><a name="l01598"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#acbae48f94b847117b71a445add67f616"> 1598</a></span>&#160;        {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> connectionManager.IsConnected; }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div>
<div class="line"><a name="l01603"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3fbd145d6a4e7806e392299e6a1ed69d"> 1603</a></span>&#160;        <span class="keyword">public</span> IDbConnection <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3fbd145d6a4e7806e392299e6a1ed69d">Disconnect</a>()</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                log.Debug(<span class="stringliteral">&quot;disconnecting session&quot;</span>);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                <span class="keywordflow">return</span> connectionManager.Disconnect();</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div>
<div class="line"><a name="l01613"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a74eb71dedf1904ddbc2a2f783a1df170"> 1613</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a74eb71dedf1904ddbc2a2f783a1df170" title="Obtain a new ADO.NET connection. ">Reconnect</a>()</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                log.Debug(<span class="stringliteral">&quot;reconnecting session&quot;</span>);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                connectionManager.Reconnect();</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div>
<div class="line"><a name="l01623"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9c07747d4b3e92dd64f089f5b7b34063"> 1623</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9c07747d4b3e92dd64f089f5b7b34063" title="Reconnect to the given ADO.NET connection. ">Reconnect</a>(IDbConnection conn)</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                log.Debug(<span class="stringliteral">&quot;reconnecting session&quot;</span>);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                connectionManager.Reconnect(conn);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;            }</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="preprocessor">        #region System.IDisposable Members</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span> fetchProfile;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        ~<a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a>()</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            Dispose(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div>
<div class="line"><a name="l01648"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9d64809792c5fbacb6e71f700777cc97"> 1648</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9d64809792c5fbacb6e71f700777cc97" title="Perform a soft (distributed transaction aware) close of the session ">Dispose</a>()</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;            {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                log.Debug(<span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;[session-id={0}] running ISession.Dispose()&quot;</span>, SessionId));</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                <span class="keywordflow">if</span> (TransactionContext != null)</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                    TransactionContext.ShouldCloseSessionOnDistributedTransactionCompleted = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                Dispose(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            }</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        }</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> Dispose(<span class="keywordtype">bool</span> isDisposing)</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                <span class="keywordflow">if</span> (IsAlreadyDisposed)</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                    <span class="comment">// don&#39;t dispose of multiple times.</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                }</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                log.Debug(<span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;[session-id={0}] executing real Dispose({1})&quot;</span>, SessionId, isDisposing));</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                <span class="comment">// free managed resources that are being managed by the session if we</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                <span class="comment">// know this call came through Dispose()</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                <span class="keywordflow">if</span> (isDisposing &amp;&amp; !IsClosed)</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                    Close();</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                <span class="comment">// free unmanaged resources here</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                IsAlreadyDisposed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                <span class="comment">// nothing for Finalizer to do - so tell the GC to ignore it</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                GC.SuppressFinalize(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        }</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> Filter(<span class="keywordtype">object</span> collection, <span class="keywordtype">string</span> filter, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters, IList results)</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_filter_query_plan.html" title="Extends an HQLQueryPlan to maintain a reference to the collection-role name being filtered...">FilterQueryPlan</a> plan = GetFilterQueryPlan(collection, filter, queryParameters, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                dontFlushFromFind++; <span class="comment">//stops flush being called multiple times if this method is recursively called</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                    plan.PerformList(queryParameters, <span class="keyword">this</span>, results);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                <span class="keywordflow">catch</span> (HibernateException)</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                {</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                    <span class="comment">// Do not call Convert on HibernateExceptions</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                    <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                    <span class="keywordflow">throw</span> Convert(e, <span class="stringliteral">&quot;could not execute query&quot;</span>);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                {</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                    dontFlushFromFind--;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        }</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div>
<div class="line"><a name="l01731"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a85b713c2911f3996b191f6da17d0f383"> 1731</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IList <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a85b713c2911f3996b191f6da17d0f383" title="Execute a filter ">ListFilter</a>(<span class="keywordtype">object</span> collection, <span class="keywordtype">string</span> filter, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                var results = <span class="keyword">new</span> List&lt;object&gt;();</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                Filter(collection, filter, queryParameters, results);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                <span class="keywordflow">return</span> results;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            }</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div>
<div class="line"><a name="l01741"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8f3e02fcf22e36c886aad0a506b93c22"> 1741</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IList&lt;T&gt; ListFilter&lt;T&gt;(<span class="keywordtype">object</span> collection, <span class="keywordtype">string</span> filter, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                List&lt;T&gt; results = <span class="keyword">new</span> List&lt;T&gt;();</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                Filter(collection, filter, queryParameters, results);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                <span class="keywordflow">return</span> results;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            }</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        }</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div>
<div class="line"><a name="l01751"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a4b5bdab0074c26ac3d8a538a14bd0160"> 1751</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IEnumerable <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a4b5bdab0074c26ac3d8a538a14bd0160" title="Collection from a filter ">EnumerableFilter</a>(<span class="keywordtype">object</span> collection, <span class="keywordtype">string</span> filter, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            {</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_filter_query_plan.html" title="Extends an HQLQueryPlan to maintain a reference to the collection-role name being filtered...">FilterQueryPlan</a> plan = GetFilterQueryPlan(collection, filter, queryParameters, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                <span class="keywordflow">return</span> plan.PerformIterate(queryParameters, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            }</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div>
<div class="line"><a name="l01761"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a78c6996419e9d89bfc4b916d509a71a5"> 1761</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IEnumerable&lt;T&gt; EnumerableFilter&lt;T&gt;(<span class="keywordtype">object</span> collection, <span class="keywordtype">string</span> filter, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_filter_query_plan.html" title="Extends an HQLQueryPlan to maintain a reference to the collection-role name being filtered...">FilterQueryPlan</a> plan = GetFilterQueryPlan(collection, filter, queryParameters, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                <span class="keywordflow">return</span> plan.PerformIterate&lt;T&gt;(queryParameters, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div>
<div class="line"><a name="l01771"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5ec7f1f7045ee976904b190cfe9fe0c3"> 1771</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_criteria.html" title="Criteria is a simplified API for retrieving entities by composing Expression objects. ">ICriteria</a> CreateCriteria&lt;T&gt;() where T : <span class="keyword">class</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                <span class="keywordflow">return</span> CreateCriteria(typeof(T));</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div>
<div class="line"><a name="l01779"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae7609f5bca64a91ff3f525f51f9136a8"> 1779</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_criteria.html" title="Criteria is a simplified API for retrieving entities by composing Expression objects. ">ICriteria</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#ae7609f5bca64a91ff3f525f51f9136a8" title="Creates a new Criteria for the entity class. ">CreateCriteria</a>(System.Type persistentClass)</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        {</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(persistentClass, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div>
<div class="line"><a name="l01789"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5fe9edbc33feec4c50bca15ec8693fe8"> 1789</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_criteria.html" title="Criteria is a simplified API for retrieving entities by composing Expression objects. ">ICriteria</a> CreateCriteria&lt;T&gt;(<span class="keywordtype">string</span> alias) where T : <span class="keyword">class</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                <span class="keywordflow">return</span> CreateCriteria(typeof(T), alias);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div>
<div class="line"><a name="l01797"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a73d377464599589d7634c503babc4318"> 1797</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_criteria.html" title="Criteria is a simplified API for retrieving entities by composing Expression objects. ">ICriteria</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a73d377464599589d7634c503babc4318" title="Creates a new Criteria for the entity class with a specific alias ">CreateCriteria</a>(System.Type persistentClass, <span class="keywordtype">string</span> alias)</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(persistentClass, alias, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div>
<div class="line"><a name="l01807"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#abafa8d75dad4d596ffa26fd6643d3431"> 1807</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_criteria.html" title="Criteria is a simplified API for retrieving entities by composing Expression objects. ">ICriteria</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#abafa8d75dad4d596ffa26fd6643d3431" title="Create a new Criteria instance, for the given entity name, with the given alias. ">CreateCriteria</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">string</span> alias)</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            {</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(entityName, alias, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div>
<div class="line"><a name="l01816"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af874912bc5fdfb5ef453abdfd79d98b1"> 1816</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_criteria.html" title="Criteria is a simplified API for retrieving entities by composing Expression objects. ">ICriteria</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af874912bc5fdfb5ef453abdfd79d98b1" title="Create a new Criteria instance, for the given entity name. ">CreateCriteria</a>(<span class="keywordtype">string</span> entityName)</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(entityName, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            }</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        }</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div>
<div class="line"><a name="l01825"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7001d9e5b9a93ef789385884d4d7bd26"> 1825</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_query_over.html">IQueryOver&lt;T, T&gt;</a> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T&gt;</a>() where T : <span class="keyword">class</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;            {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T, T&gt;</a>(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(typeof(T), <span class="keyword">this</span>));</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        }</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_query_over.html">IQueryOver&lt;T, T&gt;</a> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T&gt;</a>(<a class="code" href="class_n_hibernate_1_1_criterion_1_1_expression.html" title="This class is semi-deprecated. Use Restrictions. ">Expression&lt;Func&lt;T&gt;</a>&gt; alias) where T : <span class="keyword">class</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                <span class="keywordtype">string</span> aliasPath = ExpressionProcessor.FindMemberExpression(alias.Body);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T, T&gt;</a>(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(typeof(T), aliasPath, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div>
<div class="line"><a name="l01844"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5025fc017364228be6c24111227a8e00"> 1844</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_query_over.html">IQueryOver&lt;T, T&gt;</a> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T&gt;</a>(<span class="keywordtype">string</span> entityName) where T : <span class="keyword">class</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T, T&gt;</a>(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(entityName, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            }</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_query_over.html">IQueryOver&lt;T, T&gt;</a> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T&gt;</a>(<span class="keywordtype">string</span> entityName, <a class="code" href="class_n_hibernate_1_1_criterion_1_1_expression.html" title="This class is semi-deprecated. Use Restrictions. ">Expression&lt;Func&lt;T&gt;</a>&gt; alias) where T : <span class="keyword">class</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                <span class="keywordtype">string</span> aliasPath = ExpressionProcessor.FindMemberExpression(alias.Body);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_criterion_1_1_query_over.html">QueryOver&lt;T, T&gt;</a>(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_criteria_impl.html" title="Implementation of the ICriteria interface ">CriteriaImpl</a>(entityName, aliasPath, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            }</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        }</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> List(CriteriaImpl criteria, IList results)</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                <span class="keywordtype">string</span>[] implementors = Factory.GetImplementors(criteria.EntityOrClassName);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                <span class="keywordtype">int</span> size = implementors.Length;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                <a class="code" href="class_n_hibernate_1_1_loader_1_1_criteria_1_1_criteria_loader.html" title="A Loader for ICriteria queries. ">CriteriaLoader</a>[] loaders = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_loader_1_1_criteria_1_1_criteria_loader.html" title="A Loader for ICriteria queries. ">CriteriaLoader</a>[size];</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                ISet&lt;string&gt; spaces = <span class="keyword">new</span> HashSet&lt;string&gt;();</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; i++)</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                    loaders[i] = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_loader_1_1_criteria_1_1_criteria_loader.html" title="A Loader for ICriteria queries. ">CriteriaLoader</a>(</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                        GetOuterJoinLoadable(implementors[i]),</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                        Factory,</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                        criteria,</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                        implementors[i],</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                        enabledFilters</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                        );</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                    spaces.UnionWith(loaders[i].QuerySpaces);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                AutoFlushIfRequired(spaces);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                dontFlushFromFind++;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                {</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = size - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                    {</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                        ArrayHelper.AddAll(results, loaders[i].List(<span class="keyword">this</span>));</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                    }</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                }</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                <span class="keywordflow">catch</span> (HibernateException)</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                {</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                    <span class="comment">// Do not call Convert on HibernateExceptions</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                    <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                <span class="keywordflow">catch</span> (Exception sqle)</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    <span class="keywordflow">throw</span> Convert(sqle, <span class="stringliteral">&quot;Unable to perform find&quot;</span>);</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                    dontFlushFromFind--;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#abeccf19fc0578e19f61de67622dafe27"> 1918</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#abeccf19fc0578e19f61de67622dafe27" title="Is this instance associated with this Session? ">Contains</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            {</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                <span class="keywordflow">if</span> (obj.IsProxy())</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                {</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                    var proxy = obj as <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_n_hibernate_proxy.html" title="A marker interface so NHibernate can know if it is dealing with an object that is a Proxy...">INHibernateProxy</a>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                    <span class="comment">//do not use proxiesByKey, since not all</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                    <span class="comment">//proxies that point to this session&#39;s</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                    <span class="comment">//instances are in that collection!</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                    <a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html">ILazyInitializer</a> li = proxy.HibernateLazyInitializer;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                    <span class="keywordflow">if</span> (li.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#ab830ae6f52e70f31c67b6b615322dd48" title="Is the proxy uninitialzed? ">IsUninitialized</a>)</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                    {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                        <span class="comment">//if it is an uninitialized proxy, pointing</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                        <span class="comment">//with this session, then when it is accessed,</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                        <span class="comment">//the underlying instance will be &quot;contained&quot;</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                        <span class="keywordflow">return</span> li.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a196a93f7c9413ec2f79d38ab27042b63" title="Get the session to which this proxy is associated, or null if it is not attached. ...">Session</a> == <span class="keyword">this</span>;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                    }</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                    {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                        <span class="comment">//if it is initialized, see if the underlying</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                        <span class="comment">//instance is contained, since we need to</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                        <span class="comment">//account for the fact that it might have been</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                        <span class="comment">//evicted</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                        obj = li.<a class="code" href="interface_n_hibernate_1_1_proxy_1_1_i_lazy_initializer.html#a3ba5cfd1da095db7c159f9fe80f2dd3c" title="Return the underlying persistent object, initializing if necessary. ">GetImplementation</a>();</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                    }</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                }</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                <span class="comment">// A session is considered to contain an entity only if the entity has</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                <span class="comment">// an entry in the session&#39;s persistence context and the entry reports</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                <span class="comment">// that the entity has not been removed</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html" title="We need an entry to tell us all about the current state of an object with respect to its persistent s...">EntityEntry</a> entry = persistenceContext.GetEntry(obj);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                <span class="keywordflow">return</span> entry != null &amp;&amp; entry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#aa43891bc569e56ba38bc0ef880730b14" title="Gets or sets the Status of this Entity with respect to its persistence in the database. ">Status</a> != <a class="code" href="namespace_n_hibernate_1_1_engine.html#a1b396442b5d8f46009b2f81037f778c1" title="Represents the status of an entity with respect to this session. These statuses are for internal book...">Status</a>.Deleted &amp;&amp; entry.<a class="code" href="class_n_hibernate_1_1_engine_1_1_entity_entry.html#aa43891bc569e56ba38bc0ef880730b14" title="Gets or sets the Status of this Entity with respect to its persistence in the database. ">Status</a> != <a class="code" href="namespace_n_hibernate_1_1_engine.html#a1b396442b5d8f46009b2f81037f778c1" title="Represents the status of an entity with respect to this session. These statuses are for internal book...">Status</a>.Gone;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div>
<div class="line"><a name="l01961"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8c648b9e4385378a661f1d82b238f105"> 1961</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8c648b9e4385378a661f1d82b238f105" title="remove any hard references to the entity that are held by the infrastructure (references held by appl...">Evict</a>(<span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            {</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                FireEvict(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_evict_event.html" title="Defines an event class for the evicting of an entity. ">EvictEvent</a>(obj, <span class="keyword">this</span>));</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="interface_n_hibernate_1_1_i_s_q_l_query.html">ISQLQuery</a> CreateSQLQuery(<span class="keywordtype">string</span> sql)</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        {</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            {</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                <span class="keywordflow">return</span> base.CreateSQLQuery(sql);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            }</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;</div>
<div class="line"><a name="l01978"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a0cc433845f0a7a1acedc615020e1c4a6"> 1978</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a0cc433845f0a7a1acedc615020e1c4a6" title="Execute an SQL Query">ListCustomQuery</a>(<a class="code" href="interface_n_hibernate_1_1_loader_1_1_custom_1_1_i_custom_query.html" title="Extension point allowing any SQL query with named and positional parameters to be executed by Hiberna...">ICustomQuery</a> customQuery, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters, IList results)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;            {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                <a class="code" href="class_n_hibernate_1_1_loader_1_1_custom_1_1_custom_loader.html" title="Extension point for loaders which use a SQL result set with &quot;unexpected&quot; column aliases. ">CustomLoader</a> loader = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_loader_1_1_custom_1_1_custom_loader.html" title="Extension point for loaders which use a SQL result set with &quot;unexpected&quot; column aliases. ">CustomLoader</a>(customQuery, Factory);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                AutoFlushIfRequired(loader.QuerySpaces);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                dontFlushFromFind++;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                    ArrayHelper.AddAll(results, loader.List(<span class="keyword">this</span>, queryParameters));</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                }</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                    dontFlushFromFind--;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div>
<div class="line"><a name="l02003"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3f2ac7284fc34dc71e5ab5efc5684750"> 2003</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3f2ac7284fc34dc71e5ab5efc5684750">Clear</a>()</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        {</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                actionQueue.Clear();</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                persistenceContext.Clear();</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            }</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div>
<div class="line"><a name="l02013"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a32fe021007ba45d766676d96d4654833"> 2013</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a32fe021007ba45d766676d96d4654833" title="Persist all reachable transient objects, reusing the current identifier values. Note that this will n...">Replicate</a>(<span class="keywordtype">object</span> obj, <a class="code" href="class_n_hibernate_1_1_replication_mode.html" title="Represents a replication strategy. ">ReplicationMode</a> replicationMode)</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        {</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;            {</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                FireReplicate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_replicate_event.html" title="Defines an event class for the replication of an entity. ">ReplicateEvent</a>(obj, replicationMode, <span class="keyword">this</span>));</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            }</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        }</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div>
<div class="line"><a name="l02021"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8bc618eb5f7eed8c1602b3255b37cbf0"> 2021</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8bc618eb5f7eed8c1602b3255b37cbf0" title="Persist the state of the given detached instance, reusing the current identifier value. This operation cascades to associated instances if the association is mapped with cascade=&quot;replicate&quot;. ">Replicate</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj, <a class="code" href="class_n_hibernate_1_1_replication_mode.html" title="Represents a replication strategy. ">ReplicationMode</a> replicationMode)</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                FireReplicate(<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_replicate_event.html" title="Defines an event class for the replication of an entity. ">ReplicateEvent</a>(entityName, obj, replicationMode, <span class="keyword">this</span>));</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            }</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_session_factory.html" title="Creates ISessions. ">ISessionFactory</a> SessionFactory</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        {</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> Factory; }</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div>
<div class="line"><a name="l02034"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6cba98e83dafb25b6c380a38acd8db2b"> 2034</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a6cba98e83dafb25b6c380a38acd8db2b" title="Cancel execution of the current query. ">CancelQuery</a>()</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        {</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                Batcher.CancelLastQuery();</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            }</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;</div>
<div class="line"><a name="l02044"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7e09438ea77a5d0f210db75520e22da4"> 2044</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_filter.html" title="Type definition of Filter. Filter defines the user&#39;s view into enabled dynamic filters, allowing them to set filter parameter values. ">IFilter</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7e09438ea77a5d0f210db75520e22da4" title="Retrieve a currently enabled filter by name. ">GetEnabledFilter</a>(<span class="keywordtype">string</span> filterName)</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            {</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_i_filter.html" title="Type definition of Filter. Filter defines the user&#39;s view into enabled dynamic filters, allowing them to set filter parameter values. ">IFilter</a> result;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                enabledFilters.TryGetValue(filterName, out result);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;            }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;        }</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div>
<div class="line"><a name="l02055"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a28a5dc2d97340acc8ff6b23eec56c2a3"> 2055</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_filter.html" title="Type definition of Filter. Filter defines the user&#39;s view into enabled dynamic filters, allowing them to set filter parameter values. ">IFilter</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a28a5dc2d97340acc8ff6b23eec56c2a3" title="Enable the named filter for this current session. ">EnableFilter</a>(<span class="keywordtype">string</span> filterName)</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            {</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                <a class="code" href="class_n_hibernate_1_1_impl_1_1_filter_impl.html">FilterImpl</a> filter = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_filter_impl.html">FilterImpl</a>(Factory.GetFilterDefinition(filterName));</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                enabledFilters[filterName] = filter;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                <span class="keywordflow">if</span> (!enabledFilterNames.Contains(filterName))</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                {</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                    enabledFilterNames.Add(filterName);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                }</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                <span class="keywordflow">return</span> filter;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;            }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        }</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;</div>
<div class="line"><a name="l02070"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7b9b8fe4ef566b08f6c3ffab50b49aea"> 2070</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a7b9b8fe4ef566b08f6c3ffab50b49aea" title="Disable the named filter for the current session. ">DisableFilter</a>(<span class="keywordtype">string</span> filterName)</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        {</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                enabledFilters.Remove(filterName);</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                enabledFilterNames.Remove(filterName);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        }</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div>
<div class="line"><a name="l02080"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a28506116a870c5c9be2e77b84d293c67"> 2080</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> Object <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a28506116a870c5c9be2e77b84d293c67" title="Retrieve the currently set value for a filter parameter. ">GetFilterParameterValue</a>(<span class="keywordtype">string</span> filterParameterName)</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        {</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            {</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                <span class="keywordtype">string</span>[] parsed = ParseFilterParameterName(filterParameterName);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_i_filter.html" title="Type definition of Filter. Filter defines the user&#39;s view into enabled dynamic filters, allowing them to set filter parameter values. ">IFilter</a> ifilter;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                enabledFilters.TryGetValue(parsed[0], out ifilter);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                <a class="code" href="class_n_hibernate_1_1_impl_1_1_filter_impl.html">FilterImpl</a> filter = ifilter as <a class="code" href="class_n_hibernate_1_1_impl_1_1_filter_impl.html">FilterImpl</a>;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                <span class="keywordflow">if</span> (filter == null)</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                {</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Filter [&quot;</span> + parsed[0] + <span class="stringliteral">&quot;] currently not enabled&quot;</span>);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                }</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                <span class="keywordflow">return</span> filter.GetParameter(parsed[1]);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;            }</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;</div>
<div class="line"><a name="l02097"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5af51bc7901bb8e3efc06b1a5e9fcb3f"> 2097</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="interface_n_hibernate_1_1_type_1_1_i_type.html">IType</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5af51bc7901bb8e3efc06b1a5e9fcb3f" title="Retrieve the type for a given filter parameter. ">GetFilterParameterType</a>(<span class="keywordtype">string</span> filterParameterName)</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        {</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            {</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                <span class="keywordtype">string</span>[] parsed = ParseFilterParameterName(filterParameterName);</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_filter_definition.html" title="A FilterDefinition defines the global attributes of a dynamic filter. This information includes its n...">FilterDefinition</a> filterDef = Factory.GetFilterDefinition(parsed[0]);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                <span class="keywordflow">if</span> (filterDef == null)</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(parsed[0], <span class="stringliteral">&quot;Filter [&quot;</span> + parsed[0] + <span class="stringliteral">&quot;] not defined&quot;</span>);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_type_1_1_i_type.html">IType</a> type = filterDef.<a class="code" href="class_n_hibernate_1_1_engine_1_1_filter_definition.html#a747ebccd5d8334472bf79897db7d3e10" title="Retreive the type of the named parameter defined for this filter. ">GetParameterType</a>(parsed[1]);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                <span class="keywordflow">if</span> (type == null)</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                {</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                    <span class="comment">// this is an internal error of some sort...</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(parsed[1], <span class="stringliteral">&quot;Unable to locate type for filter parameter&quot;</span>);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                }</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                <span class="keywordflow">return</span> type;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            }</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;        }</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IDictionary&lt;string, IFilter&gt; EnabledFilters</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        {</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                <span class="keywordflow">foreach</span> (<a class="code" href="interface_n_hibernate_1_1_i_filter.html" title="Type definition of Filter. Filter defines the user&#39;s view into enabled dynamic filters, allowing them to set filter parameter values. ">IFilter</a> filter <span class="keywordflow">in</span> enabledFilters.Values)</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                    filter.<a class="code" href="interface_n_hibernate_1_1_i_filter.html#a61a09697926b1af562711ed44161a12e" title="Perform validation of the filter state. This is used to verify the state of the filter after its enab...">Validate</a>();</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                <span class="keywordflow">return</span> enabledFilters;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">string</span>[] ParseFilterParameterName(<span class="keywordtype">string</span> filterParameterName)</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        {</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                <span class="keywordtype">int</span> dot = filterParameterName.IndexOf(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                <span class="keywordflow">if</span> (dot &lt;= 0)</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Invalid filter-parameter name format&quot;</span>, <span class="stringliteral">&quot;filterParameterName&quot;</span>);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                }</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                <span class="keywordtype">string</span> filterName = filterParameterName.Substring(0, dot);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                <span class="keywordtype">string</span> parameterName = filterParameterName.Substring(dot + 1);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[] { filterName, parameterName };</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            }</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="class_n_hibernate_1_1_ado_net_1_1_connection_manager.html" title="Manages the database connection and transaction for an ISession. ">ConnectionManager</a> <a class="code" href="class_n_hibernate_1_1_ado_net_1_1_connection_manager.html" title="Manages the database connection and transaction for an ISession. ">ConnectionManager</a></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> connectionManager; }</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        }</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div>
<div class="line"><a name="l02153"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a95bfbfc90a0d6ad773bfb69f84216617"> 2153</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_multi_query.html" title="Combines sevaral queries into a single database call ">IMultiQuery</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a95bfbfc90a0d6ad773bfb69f84216617" title="Create a multi query, a query that can send several queries to the server, and return all their resul...">CreateMultiQuery</a>()</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;            {</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_multi_query_impl.html">MultiQueryImpl</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;            }</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        }</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div>
<div class="line"><a name="l02161"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a810c4d81d58ab3729cff1bf03b0a323f"> 2161</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_multi_criteria.html" title="Combines several queries into a single DB call ">IMultiCriteria</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a810c4d81d58ab3729cff1bf03b0a323f" title="An IMultiCriteria that can return a list of all the results of all the criterias. ...">CreateMultiCriteria</a>()</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;            {</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_multi_criteria_impl.html">MultiCriteriaImpl</a>(<span class="keyword">this</span>, Factory);</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;            }</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        }</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_stat_1_1_i_session_statistics.html" title="Information about the first-level (session) cache for a particular session instance ...">ISessionStatistics</a> Statistics</div>
<div class="line"><a name="l02171"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3504d6bb7fbf68ff21bf85649f293014"> 2171</a></span>&#160;        {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;            <span class="keyword">get</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            {</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_stat_1_1_session_statistics_impl.html">SessionStatisticsImpl</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            }</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        }</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div>
<div class="line"><a name="l02178"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aec3834ff76c830c916ec6958133252e2"> 2178</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aec3834ff76c830c916ec6958133252e2" title="Notify the session that an NHibernate transaction has begun. ">AfterTransactionBegin</a>(<a class="code" href="interface_n_hibernate_1_1_i_transaction.html" title="Allows the application to define units of work, while maintaining abstraction from the underlying tra...">ITransaction</a> tx)</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        {</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                interceptor.<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html#a43f959dc55506cfff48ad73c995fa1b2" title="Called when a NHibernate transaction is begun via the NHibernate ITransaction API. Will not be called if transactions are being controlled via some other mechanism. ">AfterTransactionBegin</a>(tx);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            }</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        }</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div>
<div class="line"><a name="l02187"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3ac050c26a496fee1a8e7ad31678bb5e"> 2187</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a3ac050c26a496fee1a8e7ad31678bb5e" title="Notify the session that the transaction is about to complete ">BeforeTransactionCompletion</a>(<a class="code" href="interface_n_hibernate_1_1_i_transaction.html" title="Allows the application to define units of work, while maintaining abstraction from the underlying tra...">ITransaction</a> tx)</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;            {</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                log.Debug(<span class="stringliteral">&quot;before transaction completion&quot;</span>);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                actionQueue.BeforeTransactionCompletion();</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                <span class="keywordflow">if</span> (rootSession == null)</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                    {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                        interceptor.<a class="code" href="interface_n_hibernate_1_1_i_interceptor.html#aee8d4b220e9870ad66144e58af8adf6b" title="Called before a transaction is committed (but not before rollback). ">BeforeTransactionCompletion</a>(tx);</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                    }</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                    <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                    {</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                        log.Error(<span class="stringliteral">&quot;exception in interceptor BeforeTransactionCompletion()&quot;</span>, e);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                    }</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                }</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;            }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        }</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div>
<div class="line"><a name="l02207"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a821642aafd3d0e23fb45b5a2f66466ce"> 2207</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_session.html" title="The main runtime interface between a .NET application and NHibernate. This is the central API class a...">ISession</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a821642aafd3d0e23fb45b5a2f66466ce" title="Sets the batch size of the session ">SetBatchSize</a>(<span class="keywordtype">int</span> batchSize)</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;            Batcher.BatchSize = batchSize;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div>
<div class="line"><a name="l02214"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af625e3a870b256ca6493098ba5360130"> 2214</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_engine_1_1_i_session_implementor.html" title="Defines the internal contract between the Session and other parts of NHibernate such as implementors ...">ISessionImplementor</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#af625e3a870b256ca6493098ba5360130" title="Gets the session implementation. ">GetSessionImplementation</a>()</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        {</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        }</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div>
<div class="line"><a name="l02219"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a687910421cc952ed459ced63b783ef46"> 2219</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_n_hibernate_1_1_i_session.html" title="The main runtime interface between a .NET application and NHibernate. This is the central API class a...">ISession</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a687910421cc952ed459ced63b783ef46" title="Starts a new Session with the given entity mode in effect. This secondary Session inherits the connec...">GetSession</a>(<a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a> entityMode)</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;        {</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            {</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                <span class="comment">// This is explicitly removed to allow support</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                <span class="comment">// for child sessions that want to flush during</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                <span class="comment">// the parent session lifecycle. See NH-1714,</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                <span class="comment">// and the suggested audit examples.</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                <span class="comment">//if (this.entityMode.Equals(entityMode))</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                <span class="comment">//{</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                <span class="comment">//    return this;</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                <span class="comment">//}</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                <span class="keywordflow">if</span> (rootSession != null)</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                {</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                    <span class="keywordflow">return</span> rootSession.<a class="code" href="interface_n_hibernate_1_1_i_session.html#a834ac9692e11954d5cfb0ec8a9aea022" title="Starts a new Session with the given entity mode in effect. This secondary Session inherits the connec...">GetSession</a>(entityMode);</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                }</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_i_session.html" title="The main runtime interface between a .NET application and NHibernate. This is the central API class a...">ISession</a> rtn = null;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                <span class="keywordflow">if</span> (childSessionsByEntityMode == null)</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                {</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                    childSessionsByEntityMode = <span class="keyword">new</span> Dictionary&lt;EntityMode, ISession&gt;();</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                }</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                {</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                    childSessionsByEntityMode.TryGetValue(entityMode, out rtn);</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                }</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                <span class="keywordflow">if</span> (rtn == null)</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                    log.DebugFormat(<span class="stringliteral">&quot;Creating child session with {0}&quot;</span>, entityMode);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                    rtn = <span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html" title="Concrete implementation of an NHibernate.ISession, also the central, organizing component of NHiberna...">SessionImpl</a>(<span class="keyword">this</span>, entityMode);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                    childSessionsByEntityMode.Add(entityMode, rtn);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                }</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                <span class="keywordflow">return</span> rtn;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            }</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="interface_n_hibernate_1_1_i_interceptor.html" title="Allows user code to inspect and/or change property values before they are written and after they are ...">IInterceptor</a> Interceptor</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        {</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> interceptor; }</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        }</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="class_n_hibernate_1_1_event_1_1_event_listeners.html" title="A convience holder for all defined session event listeners. ">EventListeners</a> Listeners</div>
<div class="line"><a name="l02268"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a8dc8ef549d4a33fbcdf0108dc6240a31"> 2268</a></span>&#160;        {</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> listeners; }</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        }</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> DontFlushFromFind</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> dontFlushFromFind; }</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5" title="Controls how the session interacts with the second-level cache and query cache. ">CacheMode</a> <a class="code" href="namespace_n_hibernate.html#af69566672ef06afbbf72738f7230dcd5" title="Controls how the session interacts with the second-level cache and query cache. ">CacheMode</a></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        {</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> cacheMode; }</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            set</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                <span class="keywordflow">if</span> (log.IsDebugEnabled)</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                    log.Debug(<span class="stringliteral">&quot;setting cache mode to: &quot;</span> + value);</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                }</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                cacheMode = value;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            }</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        }</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a> <a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        {</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> entityMode; }</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        }</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keyword">public</span> <a class="code" href="namespace_n_hibernate.html#a3b5a7882bfc34e812d919e4a806a9438" title="Defines the representation modes available for entities. ">EntityMode</a> ActiveEntityMode</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> entityMode; }</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> FetchProfile</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> fetchProfile; }</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            set</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                fetchProfile = value;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            }</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        }</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div>
<div class="line"><a name="l02312"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9aee296fd2535187f1adf05b024a20ee"> 2312</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a9aee296fd2535187f1adf05b024a20ee" title="Change the read-only status of an entity (or proxy). Read-only entities can be modified, but changes are not persisted. They are not dirty-checked and snapshots of persistent state are not maintained.  ">SetReadOnly</a>(<span class="keywordtype">object</span> entityOrProxy, <span class="keywordtype">bool</span> readOnly)</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        {</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;            {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;                persistenceContext.SetReadOnly(entityOrProxy, readOnly);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            }</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        }</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> DefaultReadOnly</div>
<div class="line"><a name="l02323"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a5d35680c51c72c8e2371bbeed350c5ee"> 2323</a></span>&#160;        {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> persistenceContext.DefaultReadOnly; }</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;            set { persistenceContext.DefaultReadOnly = value; }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div>
<div class="line"><a name="l02329"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a01fa0a641988f625258cebb4e0b8d64b"> 2329</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a01fa0a641988f625258cebb4e0b8d64b" title="Is the specified entity (or proxy) read-only? Facade for IPersistenceContext.IsReadOnly(object).  ">IsReadOnly</a>(<span class="keywordtype">object</span> entityOrProxy)</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        {</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            ErrorIfClosed();</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;            <span class="comment">// CheckTransactionSynchStatus();</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            <span class="keywordflow">return</span> persistenceContext.IsReadOnly(entityOrProxy);</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        }</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireDelete(<a class="code" href="class_n_hibernate_1_1_event_1_1_delete_event.html" title="Defines an event class for the deletion of an entity. ">DeleteEvent</a> @event)</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_delete_event_listener.html" title="Defines the contract for handling of deletion events generated from a session. ">IDeleteEventListener</a>[] deleteEventListener = listeners.DeleteEventListeners;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; deleteEventListener.Length; i++)</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                {</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                    deleteEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_delete_event_listener.html#a6091dd03e187138b6709fe05753a8cb2" title="Handle the given delete event. ">OnDelete</a>(@event);</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                }</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        }</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireDelete(<a class="code" href="class_n_hibernate_1_1_event_1_1_delete_event.html" title="Defines an event class for the deletion of an entity. ">DeleteEvent</a> @event, ISet&lt;object&gt; transientEntities)</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;            {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_delete_event_listener.html" title="Defines the contract for handling of deletion events generated from a session. ">IDeleteEventListener</a>[] deleteEventListener = listeners.DeleteEventListeners;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; deleteEventListener.Length; i++)</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                    deleteEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_delete_event_listener.html#a6091dd03e187138b6709fe05753a8cb2" title="Handle the given delete event. ">OnDelete</a>(@event, transientEntities);</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                }</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;            }</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        }</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireEvict(<a class="code" href="class_n_hibernate_1_1_event_1_1_evict_event.html" title="Defines an event class for the evicting of an entity. ">EvictEvent</a> evictEvent)</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;            {</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_evict_event_listener.html" title="Defines the contract for handling of evict events generated from a session. ">IEvictEventListener</a>[] evictEventListener = listeners.EvictEventListeners;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; evictEventListener.Length; i++)</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                    evictEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_evict_event_listener.html#a7eac87a4e27696a74a12ffc84e99bd73" title="Handle the given evict event. ">OnEvict</a>(evictEvent);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;            }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        }</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireLoad(<a class="code" href="class_n_hibernate_1_1_event_1_1_load_event.html" title="Defines an event class for the loading of an entity. ">LoadEvent</a> @event, <a class="code" href="class_n_hibernate_1_1_event_1_1_load_type.html">LoadType</a> loadType)</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        {</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            {</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_load_event_listener.html" title="Defines the contract for handling of load events generated from a session. ">ILoadEventListener</a>[] loadEventListener = listeners.LoadEventListeners;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; loadEventListener.Length; i++)</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                    loadEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_load_event_listener.html#ad98fe250a45a449f18048486b83e1f2a" title="Handle the given load event. ">OnLoad</a>(@event, loadType);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                }</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            }</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        }</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireLock(<a class="code" href="class_n_hibernate_1_1_event_1_1_lock_event.html" title="Defines an event class for the locking of an entity. ">LockEvent</a> lockEvent)</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            {</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_lock_event_listener.html" title="Defines the contract for handling of lock events generated from a session. ">ILockEventListener</a>[] lockEventListener = listeners.LockEventListeners;</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; lockEventListener.Length; i++)</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                {</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                    lockEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_lock_event_listener.html#a56dcafd3a5b0a01369c386b4a60d97a0" title="Handle the given lock event. ">OnLock</a>(lockEvent);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;            }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        }</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">object</span> FireMerge(<a class="code" href="class_n_hibernate_1_1_event_1_1_merge_event.html" title="An event class for merge() and saveOrUpdateCopy() ">MergeEvent</a> @event)</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        {</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            {</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_merge_event_listener.html" title="Defines the contract for handling of merge events generated from a session. ">IMergeEventListener</a>[] mergeEventListener = listeners.MergeEventListeners;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mergeEventListener.Length; i++)</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                {</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                    mergeEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_merge_event_listener.html#ae6649b918e605d5f529282b3e8d8e722" title="Handle the given merge event. ">OnMerge</a>(@event);</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                }</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                <span class="keywordflow">return</span> @<span class="keyword">event</span>.Result;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            }</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireMerge(IDictionary copiedAlready, <a class="code" href="class_n_hibernate_1_1_event_1_1_merge_event.html" title="An event class for merge() and saveOrUpdateCopy() ">MergeEvent</a> @event)</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        {</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;            {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_merge_event_listener.html" title="Defines the contract for handling of merge events generated from a session. ">IMergeEventListener</a>[] mergeEventListener = listeners.MergeEventListeners;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mergeEventListener.Length; i++)</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                {</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                    mergeEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_merge_event_listener.html#ae6649b918e605d5f529282b3e8d8e722" title="Handle the given merge event. ">OnMerge</a>(@event, copiedAlready);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                }</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;            }</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        }</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FirePersist(IDictionary copiedAlready, <a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a> @event)</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html" title="Defines the contract for handling of create events generated from a session. ">IPersistEventListener</a>[] persistEventListener = listeners.PersistEventListeners;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; persistEventListener.Length; i++)</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                {</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                    persistEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html#a5f26b66fc189e2ad43e5cb001c159c69" title="Handle the given create event.">OnPersist</a>(@event, copiedAlready);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            }</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        }</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FirePersist(<a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a> @event)</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            {</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html" title="Defines the contract for handling of create events generated from a session. ">IPersistEventListener</a>[] createEventListener = listeners.PersistEventListeners;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; createEventListener.Length; i++)</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                {</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                    createEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html#a5f26b66fc189e2ad43e5cb001c159c69" title="Handle the given create event.">OnPersist</a>(@event);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                }</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            }</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        }</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FirePersistOnFlush(IDictionary copiedAlready, <a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a> @event)</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        {</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;            {</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html" title="Defines the contract for handling of create events generated from a session. ">IPersistEventListener</a>[] persistEventListener = listeners.PersistOnFlushEventListeners;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; persistEventListener.Length; i++)</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                    persistEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html#a5f26b66fc189e2ad43e5cb001c159c69" title="Handle the given create event.">OnPersist</a>(@event, copiedAlready);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                }</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;            }</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        }</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FirePersistOnFlush(<a class="code" href="class_n_hibernate_1_1_event_1_1_persist_event.html" title="An event class for persist() ">PersistEvent</a> @event)</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        {</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;            {</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html" title="Defines the contract for handling of create events generated from a session. ">IPersistEventListener</a>[] createEventListener = listeners.PersistOnFlushEventListeners;</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; createEventListener.Length; i++)</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                    createEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_persist_event_listener.html#a5f26b66fc189e2ad43e5cb001c159c69" title="Handle the given create event.">OnPersist</a>(@event);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                }</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;            }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        }</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireRefresh(<a class="code" href="class_n_hibernate_1_1_event_1_1_refresh_event.html" title="Defines an event class for the refreshing of an object. ">RefreshEvent</a> refreshEvent)</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;            {</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_refresh_event_listener.html" title="Defines the contract for handling of refresh events generated from a session. ">IRefreshEventListener</a>[] refreshEventListener = listeners.RefreshEventListeners;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; refreshEventListener.Length; i++)</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                    refreshEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_refresh_event_listener.html#a416f8af9557272e564d73eb33aee2b38" title="Handle the given refresh event. ">OnRefresh</a>(refreshEvent);</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;                }</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;            }</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        }</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireRefresh(IDictionary refreshedAlready, <a class="code" href="class_n_hibernate_1_1_event_1_1_refresh_event.html" title="Defines an event class for the refreshing of an object. ">RefreshEvent</a> refreshEvent)</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        {</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;            {</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_refresh_event_listener.html" title="Defines the contract for handling of refresh events generated from a session. ">IRefreshEventListener</a>[] refreshEventListener = listeners.RefreshEventListeners;</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; refreshEventListener.Length; i++)</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                {</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                    refreshEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_refresh_event_listener.html#a416f8af9557272e564d73eb33aee2b38" title="Handle the given refresh event. ">OnRefresh</a>(refreshEvent, refreshedAlready);</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                }</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            }</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        }</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireReplicate(<a class="code" href="class_n_hibernate_1_1_event_1_1_replicate_event.html" title="Defines an event class for the replication of an entity. ">ReplicateEvent</a> @event)</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        {</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;            {</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_replicate_event_listener.html" title="Defines the contract for handling of replicate events generated from a session. ">IReplicateEventListener</a>[] replicateEventListener = listeners.ReplicateEventListeners;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; replicateEventListener.Length; i++)</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                    replicateEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_replicate_event_listener.html#a53d6f220ae3b2a36abaf94b9d88717a9" title="Handle the given replicate event. ">OnReplicate</a>(@event);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;            }</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        }</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">object</span> FireSave(<a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a> @event)</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;            {</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_save_or_update_event_listener.html" title="Defines the contract for handling of update events generated from a session. ">ISaveOrUpdateEventListener</a>[] saveEventListener = listeners.SaveEventListeners;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; saveEventListener.Length; i++)</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                {</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                    saveEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_save_or_update_event_listener.html#a410a6472e5c59666e4609d549753cb31" title="Handle the given update event. ">OnSaveOrUpdate</a>(@event);</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                }</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                <span class="keywordflow">return</span> @<span class="keyword">event</span>.ResultId;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;            }</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        }</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireSaveOrUpdate(<a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a> @event)</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        {</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            {</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_save_or_update_event_listener.html" title="Defines the contract for handling of update events generated from a session. ">ISaveOrUpdateEventListener</a>[] saveOrUpdateEventListener = listeners.SaveOrUpdateEventListeners;</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; saveOrUpdateEventListener.Length; i++)</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                    saveOrUpdateEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_save_or_update_event_listener.html#a410a6472e5c59666e4609d549753cb31" title="Handle the given update event. ">OnSaveOrUpdate</a>(@event);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                }</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            }</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        }</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> FireUpdate(<a class="code" href="class_n_hibernate_1_1_event_1_1_save_or_update_event.html" title="An event class for saveOrUpdate() ">SaveOrUpdateEvent</a> @event)</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;        {</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> SessionIdLoggingContext(SessionId))</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            {</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                <a class="code" href="interface_n_hibernate_1_1_event_1_1_i_save_or_update_event_listener.html" title="Defines the contract for handling of update events generated from a session. ">ISaveOrUpdateEventListener</a>[] updateEventListener = listeners.UpdateEventListeners;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; updateEventListener.Length; i++)</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                {</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                    updateEventListener[i].<a class="code" href="interface_n_hibernate_1_1_event_1_1_i_save_or_update_event_listener.html#a410a6472e5c59666e4609d549753cb31" title="Handle the given update event. ">OnSaveOrUpdate</a>(@event);</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                }</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        }</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div>
<div class="line"><a name="l02559"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aba271247c727a021238676ae5f540c0d"> 2559</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aba271247c727a021238676ae5f540c0d" title="Execute a native SQL update or delete query">ExecuteNativeUpdate</a>(<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_sql_1_1_native_s_q_l_query_specification.html">NativeSQLQuerySpecification</a> nativeQuerySpecification, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            {</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                queryParameters.<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html#a8624bfb9a9c27b73dc843e80d5999da2" title="Ensure the Types and Values are the same length. ">ValidateParameters</a>();</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_1_1_native_s_q_l_query_plan.html" title="Defines a query execution plan for a native-SQL query. ">NativeSQLQueryPlan</a> plan = GetNativeSQLQueryPlan(nativeQuerySpecification);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                AutoFlushIfRequired(plan.CustomQuery.QuerySpaces);</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                    result = plan.PerformExecuteUpdate(queryParameters, <span class="keyword">this</span>);</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                }</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                {</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                }</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;            }</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        }</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div>
<div class="line"><a name="l02584"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa8b786803ff04ac87ad0ec5bd7ebab7d"> 2584</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#aa8b786803ff04ac87ad0ec5bd7ebab7d" title="Execute a HQL update or delete query">ExecuteUpdate</a>(<a class="code" href="interface_n_hibernate_1_1_i_query_expression.html">IQueryExpression</a> queryExpression, <a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html" title="Container for data that is used during the NHibernate query/load process. ">QueryParameters</a> queryParameters)</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;            {</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                queryParameters.<a class="code" href="class_n_hibernate_1_1_engine_1_1_query_parameters.html#a8624bfb9a9c27b73dc843e80d5999da2" title="Ensure the Types and Values are the same length. ">ValidateParameters</a>();</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                var plan = GetHQLQueryPlan(queryExpression, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                AutoFlushIfRequired(plan.QuerySpaces);</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                    result = plan.PerformExecuteUpdate(queryParameters, <span class="keyword">this</span>);</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                }</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                <span class="keywordflow">finally</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                    AfterOperation(success);</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                }</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;            }</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;</div>
<div class="line"><a name="l02608"></a><span class="lineno"><a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a90ed62a98ce68fb6e718bb0684a416d9"> 2608</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="interface_n_hibernate_1_1_persister_1_1_entity_1_1_i_entity_persister.html" title="Concrete IEntityPersisters implement mapping and persistence logic for a particular class...">IEntityPersister</a> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_impl.html#a90ed62a98ce68fb6e718bb0684a416d9" title="Get the IEntityPersister for any instance">GetEntityPersister</a>(<span class="keywordtype">string</span> entityName, <span class="keywordtype">object</span> obj)</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        {</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;            <span class="keyword">using</span> (<span class="keyword">new</span> <a class="code" href="class_n_hibernate_1_1_impl_1_1_session_id_logging_context.html">SessionIdLoggingContext</a>(SessionId))</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                CheckAndUpdateSessionStatus();</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;                <span class="keywordflow">if</span> (entityName == null)</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                    <span class="keywordflow">return</span> Factory.GetEntityPersister(GuessEntityName(obj));</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                }</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                    <span class="comment">// try block is a hack around fact that currently tuplizers are not</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                    <span class="comment">// given the opportunity to resolve a subclass entity name.  this</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                    <span class="comment">// allows the (we assume custom) interceptor the ability to</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                    <span class="comment">// influence this decision if we were not able to based on the</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                    <span class="comment">// given entityName</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                    {</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                        <span class="keywordflow">return</span> Factory.GetEntityPersister(entityName).GetSubclassEntityPersister(obj, Factory,</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                                                                                                 entityMode);</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                    }</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                    <span class="keywordflow">catch</span> (<a class="code" href="class_n_hibernate_1_1_hibernate_exception.html" title="Any exception that occurs in the O-R persistence layer. ">HibernateException</a>)</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                    {</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                        <span class="keywordflow">try</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                        {</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                            <span class="keywordflow">return</span> GetEntityPersister(null, obj);</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                        }</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                        <span class="keywordflow">catch</span> (<a class="code" href="class_n_hibernate_1_1_hibernate_exception.html" title="Any exception that occurs in the O-R persistence layer. ">HibernateException</a>)</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                        {</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                            <span class="comment">// we ignore this exception and re-throw the</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                            <span class="comment">// original one</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                        }</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                        <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                    }</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                }</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            }</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        }</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    }</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8ceffd4ee35c3518d4e8bdc7e638efe8.html">Users</a></li><li class="navelem"><a class="el" href="dir_9f2bc69ad3850ea0b1eb7e8957b592d3.html">michael</a></li><li class="navelem"><a class="el" href="dir_f68266c935e6601a6b354a7a3fe8cebe.html">Development</a></li><li class="navelem"><a class="el" href="dir_7ad34b7b988357f7795f42187a275fa7.html">HSA.InfoSys</a></li><li class="navelem"><a class="el" href="dir_76d1b2293a59a3f7e99194d6baf2a3b5.html">3rdparty</a></li><li class="navelem"><a class="el" href="dir_d9bcc14e82931392e08de330211ee0a7.html">nhibernate-core</a></li><li class="navelem"><a class="el" href="dir_5b8fd4d1be83e80e12f265252ef3db1e.html">src</a></li><li class="navelem"><a class="el" href="dir_c526d93b00606470303d366d91616a48.html">NHibernate</a></li><li class="navelem"><a class="el" href="dir_084e363ed5e10d1f8f386dbc63b11c4c.html">Impl</a></li><li class="navelem"><b>SessionImpl.cs</b></li>
    <li class="footer">Generated on Fri Jul 5 2013 02:12:14 for HSA.InfoSys by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
